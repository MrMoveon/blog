<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>canvas动画揭秘 | 前端开发笔记</title>
    <meta name="description" content="前端开发笔记">
    <link rel="icon" href="/blog/icon.ico">
    
    <link rel="preload" href="/blog/assets/css/0.styles.45e5a3ae.css" as="style"><link rel="preload" href="/blog/assets/js/app.ee223f02.js" as="script"><link rel="preload" href="/blog/assets/js/2.f364336e.js" as="script"><link rel="preload" href="/blog/assets/js/33.1707ffb1.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.60d9a5c4.js"><link rel="prefetch" href="/blog/assets/js/11.9d12addb.js"><link rel="prefetch" href="/blog/assets/js/12.8ef0bd8a.js"><link rel="prefetch" href="/blog/assets/js/13.71ffc42f.js"><link rel="prefetch" href="/blog/assets/js/14.25b3510a.js"><link rel="prefetch" href="/blog/assets/js/15.c4d91af5.js"><link rel="prefetch" href="/blog/assets/js/16.948c6a33.js"><link rel="prefetch" href="/blog/assets/js/17.0e6c3b39.js"><link rel="prefetch" href="/blog/assets/js/18.5f7af77b.js"><link rel="prefetch" href="/blog/assets/js/19.3d23eaff.js"><link rel="prefetch" href="/blog/assets/js/20.472050f8.js"><link rel="prefetch" href="/blog/assets/js/21.daaff1eb.js"><link rel="prefetch" href="/blog/assets/js/22.ae3ff2ee.js"><link rel="prefetch" href="/blog/assets/js/23.06d58a4e.js"><link rel="prefetch" href="/blog/assets/js/24.8df026f6.js"><link rel="prefetch" href="/blog/assets/js/25.8fa3c5ac.js"><link rel="prefetch" href="/blog/assets/js/26.b9e79cc9.js"><link rel="prefetch" href="/blog/assets/js/27.0c29d378.js"><link rel="prefetch" href="/blog/assets/js/28.5c6b388b.js"><link rel="prefetch" href="/blog/assets/js/29.a0f69e48.js"><link rel="prefetch" href="/blog/assets/js/3.641e1028.js"><link rel="prefetch" href="/blog/assets/js/30.dc7fbcb3.js"><link rel="prefetch" href="/blog/assets/js/31.a0f54c32.js"><link rel="prefetch" href="/blog/assets/js/32.06b2a848.js"><link rel="prefetch" href="/blog/assets/js/34.4a894dbb.js"><link rel="prefetch" href="/blog/assets/js/35.380e3cca.js"><link rel="prefetch" href="/blog/assets/js/36.cbda8a08.js"><link rel="prefetch" href="/blog/assets/js/37.a4ee9d32.js"><link rel="prefetch" href="/blog/assets/js/38.9d939308.js"><link rel="prefetch" href="/blog/assets/js/39.0db069f8.js"><link rel="prefetch" href="/blog/assets/js/4.dd025489.js"><link rel="prefetch" href="/blog/assets/js/40.7207834f.js"><link rel="prefetch" href="/blog/assets/js/41.a0452c50.js"><link rel="prefetch" href="/blog/assets/js/42.2122454f.js"><link rel="prefetch" href="/blog/assets/js/43.8bb0a71b.js"><link rel="prefetch" href="/blog/assets/js/44.3e769886.js"><link rel="prefetch" href="/blog/assets/js/5.2cc523f9.js"><link rel="prefetch" href="/blog/assets/js/6.86e346f0.js"><link rel="prefetch" href="/blog/assets/js/7.d17b9335.js"><link rel="prefetch" href="/blog/assets/js/8.b2177cb3.js"><link rel="prefetch" href="/blog/assets/js/9.a8aca7d1.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.45e5a3ae.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">前端开发笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">主页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/framework/jquery/" class="nav-link">jquery源码分析</a></li><li class="dropdown-item"><!----> <a href="/blog/vue/" class="nav-link">vue最佳实践</a></li><li class="dropdown-item"><!----> <a href="/blog/vue/mobile-base-template.html" class="nav-link">vue移动端模版</a></li><li class="dropdown-item"><!----> <a href="/blog/typescript/" class="nav-link">typescript</a></li><li class="dropdown-item"><!----> <a href="/blog/mina/" class="nav-link">微信小程序</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">工具</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/tools/dd-utils.html" class="nav-link">自定义工具函数库</a></li><li class="dropdown-item"><!----> <a href="/blog/vscode-plugins/" class="nav-link">vscode常用插件</a></li><li class="dropdown-item"><!----> <a href="/blog/vuepress/" class="nav-link">vuepress</a></li><li class="dropdown-item"><!----> <a href="/blog/git/" class="nav-link">git</a></li><li class="dropdown-item"><!----> <a href="/blog/mock/" class="nav-link">mock</a></li><li class="dropdown-item"><!----> <a href="/blog/tools/" class="nav-link">工具函數</a></li><li class="dropdown-item"><!----> <a href="/blog/tools/date.html" class="nav-link">日期函數</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/mongoDB/" class="nav-link">mongoDB学习</a></li><li class="dropdown-item"><!----> <a href="/blog/mongoDB/learning/aggregate.html" class="nav-link">mongoDB aggregate</a></li><li class="dropdown-item"><!----> <a href="/blog/mongoDB/learning/mongoose.html" class="nav-link">mongoose</a></li><li class="dropdown-item"><!----> <a href="/blog/Redis/" class="nav-link">Redis</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">可视化</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/svg-canvas/svg.html" class="nav-link">svg</a></li><li class="dropdown-item"><!----> <a href="/blog/svg-canvas/canvas.html" class="nav-link router-link-exact-active router-link-active">canvas</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">electron</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/electron/" class="nav-link">electron 基础</a></li><li class="dropdown-item"><!----> <a href="/blog/electron/meos.html" class="nav-link">electron 进阶</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">egg</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/egg/" class="nav-link">egg最佳实践</a></li><li class="dropdown-item"><!----> <a href="/blog/egg/ask.html" class="nav-link">egg ask项目后端</a></li><li class="dropdown-item"><!----> <a href="/blog/egg/ask-client.html" class="nav-link">egg ask项目前端</a></li><li class="dropdown-item"><!----> <a href="/blog/egg/ask-client.html" class="nav-link">egg ask项目管理平台</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">uniapp</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/uniapp/xiaomi.html" class="nav-link">项目实战-xiaomi</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/scaffold/" class="nav-link">手撸一个前端脚手架</a></li><li class="dropdown-item"><!----> <a href="/blog/gulp_multi_pages/" class="nav-link">gulp多页面应用脚手架</a></li><li class="dropdown-item"><!----> <a href="/blog/regexp/" class="nav-link">正则学习</a></li><li class="dropdown-item"><!----> <a href="/blog/webapp/" class="nav-link">webapp</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/MrMoveon/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">主页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/framework/jquery/" class="nav-link">jquery源码分析</a></li><li class="dropdown-item"><!----> <a href="/blog/vue/" class="nav-link">vue最佳实践</a></li><li class="dropdown-item"><!----> <a href="/blog/vue/mobile-base-template.html" class="nav-link">vue移动端模版</a></li><li class="dropdown-item"><!----> <a href="/blog/typescript/" class="nav-link">typescript</a></li><li class="dropdown-item"><!----> <a href="/blog/mina/" class="nav-link">微信小程序</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">工具</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/tools/dd-utils.html" class="nav-link">自定义工具函数库</a></li><li class="dropdown-item"><!----> <a href="/blog/vscode-plugins/" class="nav-link">vscode常用插件</a></li><li class="dropdown-item"><!----> <a href="/blog/vuepress/" class="nav-link">vuepress</a></li><li class="dropdown-item"><!----> <a href="/blog/git/" class="nav-link">git</a></li><li class="dropdown-item"><!----> <a href="/blog/mock/" class="nav-link">mock</a></li><li class="dropdown-item"><!----> <a href="/blog/tools/" class="nav-link">工具函數</a></li><li class="dropdown-item"><!----> <a href="/blog/tools/date.html" class="nav-link">日期函數</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/mongoDB/" class="nav-link">mongoDB学习</a></li><li class="dropdown-item"><!----> <a href="/blog/mongoDB/learning/aggregate.html" class="nav-link">mongoDB aggregate</a></li><li class="dropdown-item"><!----> <a href="/blog/mongoDB/learning/mongoose.html" class="nav-link">mongoose</a></li><li class="dropdown-item"><!----> <a href="/blog/Redis/" class="nav-link">Redis</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">可视化</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/svg-canvas/svg.html" class="nav-link">svg</a></li><li class="dropdown-item"><!----> <a href="/blog/svg-canvas/canvas.html" class="nav-link router-link-exact-active router-link-active">canvas</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">electron</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/electron/" class="nav-link">electron 基础</a></li><li class="dropdown-item"><!----> <a href="/blog/electron/meos.html" class="nav-link">electron 进阶</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">egg</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/egg/" class="nav-link">egg最佳实践</a></li><li class="dropdown-item"><!----> <a href="/blog/egg/ask.html" class="nav-link">egg ask项目后端</a></li><li class="dropdown-item"><!----> <a href="/blog/egg/ask-client.html" class="nav-link">egg ask项目前端</a></li><li class="dropdown-item"><!----> <a href="/blog/egg/ask-client.html" class="nav-link">egg ask项目管理平台</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">uniapp</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/uniapp/xiaomi.html" class="nav-link">项目实战-xiaomi</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/scaffold/" class="nav-link">手撸一个前端脚手架</a></li><li class="dropdown-item"><!----> <a href="/blog/gulp_multi_pages/" class="nav-link">gulp多页面应用脚手架</a></li><li class="dropdown-item"><!----> <a href="/blog/regexp/" class="nav-link">正则学习</a></li><li class="dropdown-item"><!----> <a href="/blog/webapp/" class="nav-link">webapp</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/MrMoveon/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>canvas动画揭秘</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/svg-canvas/canvas.html#基础图像绘制" class="sidebar-link">基础图像绘制</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/svg-canvas/canvas.html#绘制圆角矩形" class="sidebar-link">绘制圆角矩形</a></li></ul></li><li><a href="/blog/svg-canvas/canvas.html#_1-运动和三角函数" class="sidebar-link">1-运动和三角函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/svg-canvas/canvas.html#_1-1常用的三角函数" class="sidebar-link">1-1常用的三角函数</a></li><li class="sidebar-sub-header"><a href="/blog/svg-canvas/canvas.html#_1-2math-atan与math-atan2" class="sidebar-link">1-2Math.atan与Math.atan2</a></li><li class="sidebar-sub-header"><a href="/blog/svg-canvas/canvas.html#_1-3箭头跟随鼠标转动" class="sidebar-link">1-3箭头跟随鼠标转动</a></li><li class="sidebar-sub-header"><a href="/blog/svg-canvas/canvas.html#_1-4正弦波的应用" class="sidebar-link">1-4正弦波的应用</a></li><li class="sidebar-sub-header"><a href="/blog/svg-canvas/canvas.html#_1-5正圆和圆周运动" class="sidebar-link">1-5正圆和圆周运动</a></li><li class="sidebar-sub-header"><a href="/blog/svg-canvas/canvas.html#_1-6速度向量" class="sidebar-link">1-6速度向量</a></li><li class="sidebar-sub-header"><a href="/blog/svg-canvas/canvas.html#_1-7加速度" class="sidebar-link">1-7加速度</a></li></ul></li><li><a href="/blog/svg-canvas/canvas.html#_2-边界和摩檫力" class="sidebar-link">2-边界和摩檫力</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/svg-canvas/canvas.html#_2-1环境边界" class="sidebar-link">2-1环境边界</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="canvas动画揭秘"><a href="#canvas动画揭秘" aria-hidden="true" class="header-anchor">#</a> canvas动画揭秘</h1> <h2 id="基础图像绘制"><a href="#基础图像绘制" aria-hidden="true" class="header-anchor">#</a> 基础图像绘制</h2> <h3 id="绘制圆角矩形"><a href="#绘制圆角矩形" aria-hidden="true" class="header-anchor">#</a> 绘制圆角矩形</h3> <img src="images/1611294875554.png" alt="1611294875554" style="zoom:80%;"> <p>圆角矩形，主要通过绘制4个圆弧进行组成，以上标示了每个节点的位置。</p> <p>以下我们创建了一个圆角矩形类，设定了圆角矩形得一些属性，并且我们从右下角半圆弧开始绘制：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 绘制圆角矩形类</span>
<span class="token keyword">class</span> <span class="token class-name">RoundRect</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>w <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>h <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>r <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>scaleX <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>scaleY <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>globalAlpha <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">'rgba(255,255,255,0)'</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">'rgba(0,0,0,1)'</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>shadowColor <span class="token operator">=</span> <span class="token string">'rgba(0,0,0,0)'</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>shadowBlur <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>shadowOffsetY <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>shadowOffsetX <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> props<span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token parameter">ctx</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> <span class="token punctuation">{</span>
            x<span class="token punctuation">,</span>
            y<span class="token punctuation">,</span>
            w<span class="token punctuation">,</span>
            h<span class="token punctuation">,</span>
            strokeStyle<span class="token punctuation">,</span>
            fillStyle<span class="token punctuation">,</span>
            shadowColor<span class="token punctuation">,</span>
            shadowBlur<span class="token punctuation">,</span>
            shadowOffsetX<span class="token punctuation">,</span>
            shadowOffsetY<span class="token punctuation">,</span>
            scaleX<span class="token punctuation">,</span>
            scaleY<span class="token punctuation">,</span>
            globalAlpha
        <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span>
        ctx<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        ctx<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span>x <span class="token operator">-</span> w <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> y <span class="token operator">-</span> h <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span>
        ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> fillStyle
        ctx<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> strokeStyle
        ctx<span class="token punctuation">.</span>shadowColor <span class="token operator">=</span> shadowColor<span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span>shadowBlur <span class="token operator">=</span> shadowBlur<span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span>shadowOffsetX <span class="token operator">=</span> shadowOffsetX<span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span>shadowOffsetY <span class="token operator">=</span> shadowOffsetY<span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">scale</span><span class="token punctuation">(</span>scaleX<span class="token punctuation">,</span> scaleY<span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span>globalAlpha <span class="token operator">=</span> globalAlpha
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">drawRoundRectPath</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span>
        ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        ctx<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        ctx<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span>
    <span class="token punctuation">}</span>
    <span class="token function">drawRoundRectPath</span><span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> w<span class="token punctuation">,</span> h<span class="token punctuation">,</span> r</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> <span class="token punctuation">{</span>
            w<span class="token punctuation">,</span>
            h<span class="token punctuation">,</span>
            r
        <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment">// 从右下角半圆弧开始绘制</span>
        ctx<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span>w <span class="token operator">-</span> r<span class="token punctuation">,</span> h <span class="token operator">-</span> r<span class="token punctuation">,</span> r<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> h <span class="token operator">-</span> r<span class="token punctuation">,</span> r<span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> r<span class="token punctuation">,</span> r<span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">*</span> <span class="token number">1.5</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span>w <span class="token operator">-</span> r<span class="token punctuation">,</span> r<span class="token punctuation">,</span> r<span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">*</span> <span class="token number">1.5</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">closePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><h2 id="_1-运动和三角函数"><a href="#_1-运动和三角函数" aria-hidden="true" class="header-anchor">#</a> 1-运动和三角函数</h2> <h3 id="_1-1常用的三角函数"><a href="#_1-1常用的三角函数" aria-hidden="true" class="header-anchor">#</a> 1-1常用的三角函数</h3> <h4 id="概念"><a href="#概念" aria-hidden="true" class="header-anchor">#</a> 概念</h4> <img src="images/1611020782422.png" alt="1611020782422" style="zoom:70%;"> <p>canvas坐标系与普通的直角坐标系不同，canvas坐标系是以左上角为原点。右侧和下侧为正，左侧和上侧为负。</p> <img src="images/1611020862092.png" alt="1611020862092" style="zoom:60%;"> <p>所以导致他们的夹角也不同，canvas中下半部分为正夹角，上部分为负夹角</p> <img src="images/1611020998746.png" alt="1611020998746" style="zoom:67%;"> <h4 id="canvas坐标进行转换"><a href="#canvas坐标进行转换" aria-hidden="true" class="header-anchor">#</a> canvas坐标进行转换</h4> <p>js当中鼠标的坐标是以文档的左上角开始的，但是与canvas交互的时候，我们需要的是鼠标以canvas左上角开始的，所以就涉及到我们需要将canvas坐标进行转换的问题：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//libs/utils.js</span>

<span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">root</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">var</span> <span class="token function-variable function">C</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
	<span class="token comment">/**
	 * 获取鼠标位置
	 */</span>
	<span class="token class-name">C</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getOffset</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">canvas</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">var</span> that <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
		<span class="token keyword">var</span> mouse <span class="token operator">=</span> <span class="token punctuation">{</span>x<span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">,</span>y<span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">}</span>
		canvas<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mousemove'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">ev</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">var</span> <span class="token punctuation">{</span>x<span class="token punctuation">,</span>y<span class="token punctuation">}</span> <span class="token operator">=</span> that<span class="token punctuation">.</span><span class="token function">eventWrapper</span><span class="token punctuation">(</span>ev<span class="token punctuation">)</span>
			mouse<span class="token punctuation">.</span>x <span class="token operator">=</span> x<span class="token punctuation">;</span>
			mouse<span class="token punctuation">.</span>y <span class="token operator">=</span> y<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
		<span class="token keyword">return</span> mouse
	<span class="token punctuation">}</span>
	<span class="token comment">/**
	 * 对事件进行包装
	 * @param {Object} ev
	 */</span>
	<span class="token class-name">C</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">eventWrapper</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">ev</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token comment">// 获取鼠标距离文档页面的距离pageX,pageY</span>
		<span class="token keyword">var</span> <span class="token punctuation">{</span>pageX<span class="token punctuation">,</span>pageY<span class="token punctuation">,</span>target<span class="token punctuation">}</span> <span class="token operator">=</span>  ev<span class="token punctuation">;</span>
		<span class="token comment">// 获取canvas距离文档的距离left,top</span>
		<span class="token keyword">var</span> <span class="token punctuation">{</span>left<span class="token punctuation">,</span>top<span class="token punctuation">}</span> <span class="token operator">=</span> target<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token comment">// 那么鼠标距离canvas的距离就是：</span>
		<span class="token keyword">return</span> <span class="token punctuation">{</span>x<span class="token punctuation">:</span>pageX<span class="token operator">-</span>left<span class="token punctuation">,</span>y<span class="token punctuation">:</span>pageY<span class="token operator">-</span>top<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	root<span class="token punctuation">.</span>$<span class="token constant">C</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">C</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
			<span class="token selector">#canvas</span><span class="token punctuation">{</span>
				<span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
				<span class="token property">margin</span><span class="token punctuation">:</span> 0 auto<span class="token punctuation">;</span>
				<span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 0 10px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0.5<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>canvas<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>../libs/utils.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
			<span class="token keyword">var</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#canvas'</span><span class="token punctuation">)</span>
			<span class="token keyword">var</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			
			
			<span class="token keyword">var</span> w <span class="token operator">=</span> canvas<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token number">500</span><span class="token punctuation">;</span>
			<span class="token keyword">var</span> h <span class="token operator">=</span> canvas<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token number">300</span>
			
			<span class="token comment">// 获取鼠标到canvas的距离</span>
			<span class="token keyword">var</span> pos <span class="token operator">=</span> $<span class="token constant">C</span><span class="token punctuation">.</span><span class="token function">getOffset</span><span class="token punctuation">(</span>canvas<span class="token punctuation">)</span>
            <span class="token comment">//点击输出点的位置</span>
			canvas<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'鼠标到canvas的距离:'</span><span class="token punctuation">,</span>pos<span class="token punctuation">)</span><span class="token punctuation">;</span> 
                <span class="token comment">// 鼠标到canvas的距离: {x: 76.5, y: 171}</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span>
			
		</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><h4 id="常用的反三角函数"><a href="#常用的反三角函数" aria-hidden="true" class="header-anchor">#</a> 常用的反三角函数</h4> <img src="images/1611025325707.png" alt="1611025325707" style="zoom:50%;"> <p>三角函数与反三角函数的js表示：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 求弧度</span>
<span class="token function">sin</span><span class="token punctuation">(</span>α<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span>角度 <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">180</span><span class="token punctuation">)</span> <span class="token operator">=</span> y <span class="token operator">/</span> c   
<span class="token function">cos</span><span class="token punctuation">(</span>α<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span>角度 <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">180</span><span class="token punctuation">)</span> <span class="token operator">=</span> x <span class="token operator">/</span> c
<span class="token function">tan</span><span class="token punctuation">(</span>α<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> Math<span class="token punctuation">.</span><span class="token function">tan</span><span class="token punctuation">(</span>角度 <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">180</span><span class="token punctuation">)</span> <span class="token operator">=</span> y <span class="token operator">/</span> x

<span class="token comment">// 反三角函数 求角度</span>
<span class="token function">arcsin</span><span class="token punctuation">(</span>y<span class="token operator">/</span>c<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> Math<span class="token punctuation">.</span><span class="token function">asin</span><span class="token punctuation">(</span>y<span class="token operator">/</span>c<span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">180</span><span class="token operator">/</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">=</span> 角度
<span class="token function">arccos</span><span class="token punctuation">(</span>x<span class="token operator">/</span>c<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> Math<span class="token punctuation">.</span><span class="token function">acos</span><span class="token punctuation">(</span>x<span class="token operator">/</span>c<span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">180</span><span class="token operator">/</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">=</span> 角度
<span class="token function">arctan</span><span class="token punctuation">(</span>dy<span class="token operator">/</span>dx<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> Math<span class="token punctuation">.</span><span class="token function">atan</span><span class="token punctuation">(</span>dy<span class="token operator">/</span>dx<span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">180</span><span class="token operator">/</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">=</span> 角度
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 求y轴长度</span>
y <span class="token operator">=</span>  Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span> 角度 <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">180</span><span class="token punctuation">)</span> <span class="token operator">*</span> c
<span class="token comment">// 求x轴长度</span>
x<span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span>角度 <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">180</span><span class="token punctuation">)</span> <span class="token operator">*</span> c
</code></pre></div><h4 id="角度弧度互转公式"><a href="#角度弧度互转公式" aria-hidden="true" class="header-anchor">#</a> 角度弧度互转公式</h4> <img src="images/1611027137345.png" alt="1611027137345" style="zoom:50%;"> <p>由于2Π-&gt;360°，那么1°-&gt;Π/180，我们可以得出公式：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
* 角度转弧度
* @param {Object} angle 角度
*/</span>
<span class="token class-name">C</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">toRad</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">angle</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> angle <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">180</span>
<span class="token punctuation">}</span>
<span class="token comment">/**
* 弧度转角度
* @param {Object} rad 弧度
 */</span>
<span class="token class-name">C</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">toAngle</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">rad</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> rad <span class="token operator">*</span> <span class="token number">180</span> <span class="token operator">/</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_1-2math-atan与math-atan2"><a href="#_1-2math-atan与math-atan2" aria-hidden="true" class="header-anchor">#</a> 1-2Math.atan与Math.atan2</h3> <img src="images/1611036184525.png" alt="1611036184525" style="zoom:50%;"> <p><strong>注意：</strong><code>Math.atan</code>在canvas坐标系中有比较严重的问题，在坐标系的1、3象限和2、4象限会得到相同的角度值（如上图左侧显示）所以我们就不知道鼠标位置到底在第1象限或者第3象限。所以为了解决这个问题，就有了一个新的api-<code>Math.atan2</code>，这个api不仅解决了上诉问题，还且<strong>参数</strong>也变得简单了，<strong>我们只需要传入纵横坐标之差</strong>，就可以<strong>获取到这两个点与X轴正方向的夹角</strong>。</p> <ul><li>**dx：**点与坐标点的x轴之差，**dy：**点与坐标点Y轴之差。</li> <li><strong>夹角</strong> = Math.atan(dy/dx)*180 / Math.PI</li> <li><strong>夹角</strong> = Math.atan2(dy,dx)*180 / Math.PI</li> <li><strong>弧度</strong> = Math.atan2(dy,dx)</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
			<span class="token selector">#canvas</span><span class="token punctuation">{</span>
				<span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
				<span class="token property">margin</span><span class="token punctuation">:</span> 0 auto<span class="token punctuation">;</span>
				<span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 0 10px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0.5<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>canvas<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>../libs/utils.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
			<span class="token keyword">var</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#canvas'</span><span class="token punctuation">)</span>
			<span class="token keyword">var</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			
			
			<span class="token keyword">var</span> w <span class="token operator">=</span> canvas<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token number">500</span><span class="token punctuation">;</span>
			<span class="token keyword">var</span> h <span class="token operator">=</span> canvas<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token number">300</span>
			
			<span class="token comment">// 获取鼠标到canvas的距离</span>
			<span class="token keyword">var</span> mouse <span class="token operator">=</span> $<span class="token constant">C</span><span class="token punctuation">.</span><span class="token function">getOffset</span><span class="token punctuation">(</span>canvas<span class="token punctuation">)</span>
			<span class="token comment">// 监听鼠标移动，先清除画布，再绘制坐标系，线条，夹角值</span>
			canvas<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mousemove'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				<span class="token comment">// 清空画布</span>
				ctx<span class="token punctuation">.</span><span class="token function">clearRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>w<span class="token punctuation">,</span>h<span class="token punctuation">)</span>
				<span class="token comment">// 绘制坐标系</span>
				<span class="token function">drawSystem</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
				<span class="token comment">// 绘制线</span>
				<span class="token function">drawLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
				<span class="token comment">// 绘制atan的夹角文字</span>
				<span class="token function">drawText</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
				<span class="token comment">// 绘制atan2的夹角文字</span>
				<span class="token function">drawText2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span>
			
			<span class="token comment">// 绘制坐标系</span>
			<span class="token keyword">function</span> <span class="token function">drawSystem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				ctx<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
					ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
					ctx<span class="token punctuation">.</span>lineWidth <span class="token operator">=</span> <span class="token number">1.5</span>
					ctx<span class="token punctuation">.</span>strokeStyle<span class="token operator">=</span><span class="token string">'red'</span>
					ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>h<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span>
					ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span>h<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span>
					ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span>w<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>
					ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>w<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span>h<span class="token punctuation">)</span>
					ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
				ctx<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
			<span class="token comment">// 绘制夹角线</span>
			<span class="token keyword">function</span> <span class="token function">drawLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				ctx<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
					ctx<span class="token punctuation">.</span>strokeStyle<span class="token operator">=</span><span class="token string">'#007AFF'</span><span class="token punctuation">;</span>
					ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
					<span class="token comment">// 鼠标的位置</span>
					ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span>mouse<span class="token punctuation">.</span>x<span class="token punctuation">,</span>mouse<span class="token punctuation">.</span>y<span class="token punctuation">)</span>
					<span class="token comment">// 移动到原点</span>
					ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>w<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span>h<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span>
					ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
				ctx<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
			<span class="token comment">// 绘制atan夹角文字</span>
			<span class="token keyword">function</span> <span class="token function">drawText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				ctx<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
				<span class="token keyword">var</span> dx <span class="token operator">=</span> mouse<span class="token punctuation">.</span>x<span class="token operator">-</span>w<span class="token operator">/</span><span class="token number">2</span>
				<span class="token keyword">var</span> dy <span class="token operator">=</span> mouse<span class="token punctuation">.</span>y<span class="token operator">-</span>h<span class="token operator">/</span><span class="token number">2</span>
				<span class="token keyword">var</span> text <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">atan</span><span class="token punctuation">(</span>dy<span class="token operator">/</span>dx<span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">180</span> <span class="token operator">/</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span>
				ctx<span class="token punctuation">.</span>font<span class="token operator">=</span><span class="token string">'16px Arail'</span>
				ctx<span class="token punctuation">.</span><span class="token function">fillText</span><span class="token punctuation">(</span>text<span class="token punctuation">,</span>mouse<span class="token punctuation">.</span>x<span class="token punctuation">,</span>mouse<span class="token punctuation">.</span>y<span class="token punctuation">)</span>
				ctx<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
			<span class="token comment">// 绘制atan2夹角文字</span>
			<span class="token keyword">function</span> <span class="token function">drawText2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				ctx<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
				<span class="token keyword">var</span> dx <span class="token operator">=</span> mouse<span class="token punctuation">.</span>x<span class="token operator">-</span>w<span class="token operator">/</span><span class="token number">2</span>
				<span class="token keyword">var</span> dy <span class="token operator">=</span> mouse<span class="token punctuation">.</span>y<span class="token operator">-</span>h<span class="token operator">/</span><span class="token number">2</span>
				ctx<span class="token punctuation">.</span>fillStyle<span class="token operator">=</span><span class="token string">'red'</span>
				<span class="token keyword">var</span> text <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">atan2</span><span class="token punctuation">(</span>dy<span class="token punctuation">,</span>dx<span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">180</span> <span class="token operator">/</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span>
				ctx<span class="token punctuation">.</span>font<span class="token operator">=</span><span class="token string">'16px Arail'</span>
				ctx<span class="token punctuation">.</span><span class="token function">fillText</span><span class="token punctuation">(</span>text<span class="token punctuation">,</span>mouse<span class="token punctuation">.</span>x<span class="token punctuation">,</span>mouse<span class="token punctuation">.</span>y<span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">)</span>
				ctx<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
		</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><p><img src="images/atan-atan2.gif" alt="atan-atan2"></p> <p>从上图可以看出1、3象限和2、4象限的atan计算的值相同，所以再做运算的时候需要用atan2。</p> <h3 id="_1-3箭头跟随鼠标转动"><a href="#_1-3箭头跟随鼠标转动" aria-hidden="true" class="header-anchor">#</a> 1-3箭头跟随鼠标转动</h3> <img src="images/1611041330669.png" alt="1611041330669" style="zoom:50%;"> <p>绘制一个箭头，跟随鼠标转动，这是一个标准化箭头，通过传入宽高，坐标点，生成箭头。</p> <p><img src="images/arrow.gif" alt="arrow"></p> <blockquote><p>**注意：**设置旋转的时候：这里是弧度，不是角度  arrow.rotation = Math.atan2(dy,dx)</p></blockquote> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
			<span class="token selector">#canvas</span><span class="token punctuation">{</span>
				<span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
				<span class="token property">margin</span><span class="token punctuation">:</span> 0 auto<span class="token punctuation">;</span>
				<span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 0 10px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0.5<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>canvas<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>../libs/utils.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
			<span class="token comment">// 箭头类</span>
			<span class="token keyword">class</span> <span class="token class-name">Arrow</span> <span class="token punctuation">{</span>
				<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				    <span class="token keyword">this</span><span class="token punctuation">.</span>w <span class="token operator">=</span> <span class="token number">50</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>h <span class="token operator">=</span> <span class="token number">20</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>y<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">'rgba(65,168,99,1)'</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">'rgba(0,0,0,0)'</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>rotation <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
					Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>props<span class="token punctuation">)</span>
					<span class="token keyword">return</span> <span class="token keyword">this</span>
				<span class="token punctuation">}</span>
				<span class="token function">createPath</span><span class="token punctuation">(</span><span class="token parameter">ctx</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
					<span class="token keyword">var</span> <span class="token punctuation">{</span>w<span class="token punctuation">,</span>h<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span>
					
						ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
						ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token operator">-</span>w<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token operator">-</span>h<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span>
						ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>w<span class="token operator">/</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token operator">-</span>h<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span>
						ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>w<span class="token operator">/</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token operator">-</span>h<span class="token punctuation">)</span>
						<span class="token comment">// </span>
						ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>w<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>
						ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>w<span class="token operator">/</span><span class="token number">10</span><span class="token punctuation">,</span>h<span class="token punctuation">)</span>
						ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>w<span class="token operator">/</span><span class="token number">10</span><span class="token punctuation">,</span>h<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span>
						ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token operator">-</span>w<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span>h<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span>
						ctx<span class="token punctuation">.</span><span class="token function">closePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
					
				<span class="token punctuation">}</span>
				<span class="token function">render</span><span class="token punctuation">(</span><span class="token parameter">ctx</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
					<span class="token keyword">var</span> <span class="token punctuation">{</span>strokeStyle<span class="token punctuation">,</span>fillStyle<span class="token punctuation">,</span>rotation<span class="token punctuation">,</span>x<span class="token punctuation">,</span>y<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span>
					ctx<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
						<span class="token comment">// 注意：先将位置移动到中心点，再进行旋转填充绘制。</span>
						
						ctx<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span>
						<span class="token comment">// 旋转</span>
						ctx<span class="token punctuation">.</span><span class="token function">rotate</span><span class="token punctuation">(</span>rotation<span class="token punctuation">)</span>
						<span class="token comment">// 设置样式</span>
						ctx<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> strokeStyle
						ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> fillStyle
						<span class="token comment">// 绘制路径</span>
						<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">createPath</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span>
						
						<span class="token comment">// 描边</span>
						ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
						<span class="token comment">// 填充</span>
						ctx<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
						
					
					ctx<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
					<span class="token keyword">return</span> <span class="token keyword">this</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
			<span class="token keyword">var</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#canvas'</span><span class="token punctuation">)</span>
			<span class="token keyword">var</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			
			<span class="token keyword">var</span> w <span class="token operator">=</span> canvas<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token number">500</span><span class="token punctuation">;</span>
			<span class="token keyword">var</span> h <span class="token operator">=</span> canvas<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token number">300</span>
			
			<span class="token comment">// 获取鼠标到canvas的距离</span>
			<span class="token keyword">var</span> mouse <span class="token operator">=</span> $<span class="token constant">C</span><span class="token punctuation">.</span><span class="token function">getOffset</span><span class="token punctuation">(</span>canvas<span class="token punctuation">)</span>
			<span class="token comment">// 绘制坐标系</span>
			$<span class="token constant">C</span><span class="token punctuation">.</span><span class="token function">drawSystem</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span>
			<span class="token comment">// 实例化渲染箭头</span>
			<span class="token keyword">var</span> arrow <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Arrow</span><span class="token punctuation">(</span><span class="token punctuation">{</span>x<span class="token punctuation">:</span>w<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span>y<span class="token punctuation">:</span>h<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span>
			
			canvas<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mousemove'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				<span class="token keyword">var</span> <span class="token punctuation">{</span>x<span class="token punctuation">,</span>y<span class="token punctuation">}</span> <span class="token operator">=</span> mouse<span class="token punctuation">;</span>
				<span class="token keyword">var</span> dx <span class="token operator">=</span> x<span class="token operator">-</span>w<span class="token operator">/</span><span class="token number">2</span>
				<span class="token keyword">var</span> dy <span class="token operator">=</span> y<span class="token operator">-</span>h<span class="token operator">/</span><span class="token number">2</span>
				ctx<span class="token punctuation">.</span><span class="token function">clearRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>w<span class="token punctuation">,</span>h<span class="token punctuation">)</span>
				<span class="token comment">// 绘制坐标系</span>
				$<span class="token constant">C</span><span class="token punctuation">.</span><span class="token function">drawSystem</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span>
				<span class="token comment">// 设置旋转的弧度：这里是弧度，不是角度</span>
				arrow<span class="token punctuation">.</span>rotation <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">atan2</span><span class="token punctuation">(</span>dy<span class="token punctuation">,</span>dx<span class="token punctuation">)</span>
				<span class="token comment">// 重新渲染</span>
				arrow<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span>
				<span class="token comment">// console.log(Math.atan2(dy,dx));</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span>
			<span class="token comment">// 绘制坐标系</span>
			<span class="token keyword">function</span> <span class="token function">drawSystem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				ctx<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
					ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
					ctx<span class="token punctuation">.</span>lineWidth <span class="token operator">=</span> <span class="token number">1.5</span>
					ctx<span class="token punctuation">.</span>strokeStyle<span class="token operator">=</span><span class="token string">'red'</span>
					ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>h<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span>
					ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span>h<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span>
					ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span>w<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>
					ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>w<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span>h<span class="token punctuation">)</span>
					ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
				ctx<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
		</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><h3 id="_1-4正弦波的应用"><a href="#_1-4正弦波的应用" aria-hidden="true" class="header-anchor">#</a> 1-4正弦波的应用</h3> <img src="images/1611047824275.png" alt="1611047824275" style="zoom:50%;"> <p>正弦函数的结果：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">2</span><span class="token operator">*</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">;</span>i<span class="token operator">+=</span><span class="token number">0.02</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment">// Math.sin(i)循环输出0-&gt;1-&gt;0-&gt;-1 的一个结果</span>
<span class="token punctuation">}</span>
</code></pre></div><p>余弦函数的结果：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">2</span><span class="token operator">*</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">;</span>i<span class="token operator">+=</span><span class="token number">0.02</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment">// Math.cos(i)循环输出1-&gt;0-&gt;-1-&gt;0 的一个结果</span>
<span class="token punctuation">}</span>
</code></pre></div><p>所以在一个正常的圆弧运动，他们的最大最小值就是(1，-1)</p> <p>通过他们最大最小值变化，我们可以做一些动画：<strong>平滑运动</strong>，<strong>线性运动</strong>，<strong>脉冲运动</strong>。</p> <h4 id="平滑运动"><a href="#平滑运动" aria-hidden="true" class="header-anchor">#</a> 平滑运动</h4> <p>在中心点左右摆动</p> <p><img src="images/pinghua.gif" alt="pinghua"></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
			<span class="token selector">#canvas</span> <span class="token punctuation">{</span>
				<span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
				<span class="token property">margin</span><span class="token punctuation">:</span> 0 auto<span class="token punctuation">;</span>
				<span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 0 10px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.5<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>canvas<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
			<span class="token keyword">class</span> <span class="token class-name">Ball</span> <span class="token punctuation">{</span>
				<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>r <span class="token operator">=</span> <span class="token number">25</span><span class="token punctuation">;</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">'rgba(65,168,99,1)'</span><span class="token punctuation">;</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">'rgba(0,0,0,0)'</span><span class="token punctuation">;</span>
					Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>props<span class="token punctuation">)</span>
					<span class="token keyword">return</span> <span class="token keyword">this</span>
				<span class="token punctuation">}</span>
				<span class="token function">render</span><span class="token punctuation">(</span><span class="token parameter">ctx</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
					<span class="token keyword">var</span> <span class="token punctuation">{</span>x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>r<span class="token punctuation">,</span>fillStyle<span class="token punctuation">,</span>strokeStyle<span class="token punctuation">,</span>vx<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span>
					<span class="token comment">// 保存绘图环境</span>
					ctx<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
					<span class="token comment">// 将画布坐标移动到x，y</span>
					ctx<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span>
					
					ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> fillStyle<span class="token punctuation">;</span>
					ctx<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> strokeStyle<span class="token punctuation">;</span>
					ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
					ctx<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>r<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">*</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span>
					ctx<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
					ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
					<span class="token comment">// 恢复绘图环境</span>
					ctx<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
					<span class="token keyword">return</span> <span class="token keyword">this</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
			<span class="token keyword">var</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#canvas'</span><span class="token punctuation">)</span>
			<span class="token keyword">var</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">var</span> w <span class="token operator">=</span> canvas<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token number">500</span><span class="token punctuation">;</span>
			<span class="token keyword">var</span> h <span class="token operator">=</span> canvas<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token number">300</span>

			
			<span class="token keyword">var</span> ball <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Ball</span><span class="token punctuation">(</span><span class="token punctuation">{</span>x<span class="token punctuation">:</span>w<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span>y<span class="token punctuation">:</span>h<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">// 角度</span>
			<span class="token keyword">var</span> angle <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
			<span class="token comment">// 摇摆值</span>
			<span class="token keyword">let</span> swing <span class="token operator">=</span> <span class="token number">160</span><span class="token punctuation">;</span>
			<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				window<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>move<span class="token punctuation">)</span>
				<span class="token comment">// 清空画布</span>
				ctx<span class="token punctuation">.</span><span class="token function">clearRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>w<span class="token punctuation">,</span>h<span class="token punctuation">)</span>
				<span class="token comment">// 每次自加0.02</span>
				angle<span class="token operator">+=</span><span class="token number">0.02</span><span class="token punctuation">;</span>
				<span class="token comment">// 并且%上2Π，Math.sin(angle)的值就会0-&gt;1-&gt;0-&gt;-1的值进行切换</span>
				angle<span class="token operator">%=</span><span class="token number">2</span><span class="token operator">*</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span>
				ball<span class="token punctuation">.</span>x <span class="token operator">=</span> w<span class="token operator">/</span><span class="token number">2</span> <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span>angle<span class="token punctuation">)</span> <span class="token operator">*</span> swing<span class="token punctuation">;</span>
				ball<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><h4 id="线性运动"><a href="#线性运动" aria-hidden="true" class="header-anchor">#</a> 线性运动</h4> <p>根据波幅上下摆动，并水平移动</p> <p><img src="images/xianxing.gif" alt="xianxing"></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
			<span class="token selector">#canvas</span><span class="token punctuation">{</span>
				<span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
				<span class="token property">margin</span><span class="token punctuation">:</span> 0 auto<span class="token punctuation">;</span>
				<span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 0 10px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0.5<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>canvas<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
			<span class="token keyword">class</span> <span class="token class-name">Ball</span> <span class="token punctuation">{</span>
				<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>r <span class="token operator">=</span> <span class="token number">25</span><span class="token punctuation">;</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">'rgba(65,168,99,1)'</span><span class="token punctuation">;</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">'rgba(0,0,0,0)'</span><span class="token punctuation">;</span>
					Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>props<span class="token punctuation">)</span>
					<span class="token keyword">return</span> <span class="token keyword">this</span>
				<span class="token punctuation">}</span>
				<span class="token function">render</span><span class="token punctuation">(</span><span class="token parameter">ctx</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
					<span class="token keyword">var</span> <span class="token punctuation">{</span>x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>r<span class="token punctuation">,</span>fillStyle<span class="token punctuation">,</span>strokeStyle<span class="token punctuation">,</span>vx<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span>
					<span class="token comment">// 保存绘图环境</span>
					ctx<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
					<span class="token comment">// 将画布坐标移动到x，y</span>
					ctx<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span>
					
					ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> fillStyle<span class="token punctuation">;</span>
					ctx<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> strokeStyle<span class="token punctuation">;</span>
					ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
					ctx<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>r<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">*</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span>
					ctx<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
					ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
					<span class="token comment">// 恢复绘图环境</span>
					ctx<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
					<span class="token keyword">return</span> <span class="token keyword">this</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
			<span class="token keyword">var</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#canvas'</span><span class="token punctuation">)</span>
			<span class="token keyword">var</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			
			<span class="token keyword">var</span> w <span class="token operator">=</span> canvas<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token number">500</span><span class="token punctuation">;</span>
			<span class="token keyword">var</span> h <span class="token operator">=</span> canvas<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token number">300</span>
			
			<span class="token keyword">var</span> ball <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Ball</span><span class="token punctuation">(</span><span class="token punctuation">{</span>x<span class="token punctuation">:</span><span class="token number">25</span><span class="token punctuation">,</span>y<span class="token punctuation">:</span>h<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">// 初始角度</span>
			<span class="token keyword">var</span> angle <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
			<span class="token comment">// 振幅值</span>
			<span class="token keyword">var</span> swing <span class="token operator">=</span> <span class="token number">60</span><span class="token punctuation">;</span>
			<span class="token comment">// x速度</span>
			<span class="token keyword">var</span> vx <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
			<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				window<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>move<span class="token punctuation">)</span>
				<span class="token comment">// 清除画布</span>
				ctx<span class="token punctuation">.</span><span class="token function">clearRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>w<span class="token punctuation">,</span>h<span class="token punctuation">)</span><span class="token punctuation">;</span>
				ball<span class="token punctuation">.</span>x <span class="token operator">+=</span>vx<span class="token punctuation">;</span>
				ball<span class="token punctuation">.</span>y <span class="token operator">=</span>h<span class="token operator">/</span><span class="token number">2</span> <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span>angle<span class="token punctuation">)</span><span class="token operator">*</span>swing<span class="token punctuation">;</span>
				angle<span class="token operator">+=</span><span class="token number">0.02</span><span class="token punctuation">;</span>
				<span class="token comment">// 并且%上2Π，Math.sin(angle)的值就会0-&gt;1-&gt;0-&gt;-1的值进行切换</span>
				angle <span class="token operator">%=</span> <span class="token number">2</span><span class="token operator">*</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">;</span>
				ball<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			
		</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><h4 id="脉冲运动"><a href="#脉冲运动" aria-hidden="true" class="header-anchor">#</a> 脉冲运动</h4> <p>图像放大缩小。</p> <p><img src="images/maichong.gif" alt="maichong"></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
			<span class="token selector">#canvas</span><span class="token punctuation">{</span>
				<span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
				<span class="token property">margin</span><span class="token punctuation">:</span> 0 auto<span class="token punctuation">;</span>
				<span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 0 10px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0.5<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>canvas<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>../libs/utils.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
			<span class="token keyword">class</span> <span class="token class-name">Ball</span> <span class="token punctuation">{</span>
				<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>r <span class="token operator">=</span> <span class="token number">25</span><span class="token punctuation">;</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>scaleX <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>scaleY <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">'rgba(65,168,99,1)'</span><span class="token punctuation">;</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">'rgba(0,0,0,0)'</span><span class="token punctuation">;</span>
					Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>props<span class="token punctuation">)</span>
					<span class="token keyword">return</span> <span class="token keyword">this</span>
				<span class="token punctuation">}</span>
				<span class="token function">render</span><span class="token punctuation">(</span><span class="token parameter">ctx</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
					<span class="token keyword">var</span> <span class="token punctuation">{</span>x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>r<span class="token punctuation">,</span>fillStyle<span class="token punctuation">,</span>strokeStyle<span class="token punctuation">,</span>scaleX<span class="token punctuation">,</span>scaleY<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span>
					<span class="token comment">// 保存绘图环境</span>
					ctx<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
					<span class="token comment">// 将画布坐标移动到x，y</span>
					ctx<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span>
					ctx<span class="token punctuation">.</span><span class="token function">scale</span><span class="token punctuation">(</span>scaleX<span class="token punctuation">,</span>scaleY<span class="token punctuation">)</span> 
					ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> fillStyle<span class="token punctuation">;</span>
					ctx<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> strokeStyle<span class="token punctuation">;</span>
					ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
					ctx<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>r<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">*</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span>
					ctx<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
					ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
					<span class="token comment">// 恢复绘图环境</span>
					ctx<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
					<span class="token keyword">return</span> <span class="token keyword">this</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
			<span class="token keyword">var</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#canvas'</span><span class="token punctuation">)</span>
			<span class="token keyword">var</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			
			<span class="token keyword">var</span> w <span class="token operator">=</span> canvas<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token number">500</span><span class="token punctuation">;</span>
			<span class="token keyword">var</span> h <span class="token operator">=</span> canvas<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token number">300</span>
			
			<span class="token keyword">var</span> angle <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
			<span class="token comment">// 初始缩放值</span>
			<span class="token keyword">var</span> initScale <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
			<span class="token comment">// 摆幅最大0.5的变化</span>
			<span class="token keyword">var</span> swing <span class="token operator">=</span> <span class="token number">0.5</span><span class="token punctuation">;</span>
			<span class="token comment">// 实例化小球</span>
			<span class="token keyword">var</span> ball <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Ball</span><span class="token punctuation">(</span><span class="token punctuation">{</span>x<span class="token punctuation">:</span>w<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span>y<span class="token punctuation">:</span>h<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span>scaleX<span class="token punctuation">:</span>initScale<span class="token punctuation">,</span>scaleY<span class="token punctuation">:</span>initScale<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">// 运动</span>
			<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				window<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>move<span class="token punctuation">)</span>
				<span class="token comment">// 清空画布</span>
				ctx<span class="token punctuation">.</span><span class="token function">clearRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>w<span class="token punctuation">,</span>h<span class="token punctuation">)</span>
				<span class="token comment">// 设置小球的缩放大小:初始值+摆幅*(1~-1)</span>
				ball<span class="token punctuation">.</span>scaleX <span class="token operator">=</span> ball<span class="token punctuation">.</span>scaleY <span class="token operator">=</span> initScale <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span>angle<span class="token punctuation">)</span> <span class="token operator">*</span> swing<span class="token punctuation">;</span>
				<span class="token comment">// 弧度每次增加0.02</span>
				angle <span class="token operator">+=</span><span class="token number">0.02</span><span class="token punctuation">;</span>
				<span class="token comment">// 并且%上2Π，Math.sin(angle)的值就会0-&gt;1-&gt;0-&gt;-1的值进行切换</span>
				angle <span class="token operator">%=</span><span class="token number">2</span><span class="token operator">*</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">;</span>
				ball<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><h3 id="_1-5正圆和圆周运动"><a href="#_1-5正圆和圆周运动" aria-hidden="true" class="header-anchor">#</a> 1-5正圆和圆周运动</h3> <h4 id="极坐标表达式"><a href="#极坐标表达式" aria-hidden="true" class="header-anchor">#</a> 极坐标表达式</h4> <p><img src="images/1611124084392.png" alt="1611124084392"></p> <p><strong>通过极坐标表达式，我们可以计算出x，y的坐标点：</strong></p> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token constant">R</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span>弧度<span class="token punctuation">)</span>
<span class="token keyword">var</span> y <span class="token operator">=</span> <span class="token constant">R</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span>弧度<span class="token punctuation">)</span>
</code></pre></div><h4 id="正圆圆周运动"><a href="#正圆圆周运动" aria-hidden="true" class="header-anchor">#</a> 正圆圆周运动</h4> <p>通过以上极坐标表达式，就可以轻松的计算出圆的运动位置：</p> <p><img src="images/yuanzhou.gif" alt="yuanzhou"></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
			<span class="token selector">#canvas</span><span class="token punctuation">{</span>
				<span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
				<span class="token property">margin</span><span class="token punctuation">:</span> 0 auto<span class="token punctuation">;</span>
				<span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 0 10px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0.5<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>canvas<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>../libs/utils.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
			<span class="token keyword">class</span> <span class="token class-name">Ball</span> <span class="token punctuation">{</span>
				<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>r <span class="token operator">=</span> <span class="token number">25</span><span class="token punctuation">;</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>scaleX <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>scaleY <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">'rgba(65,168,99,1)'</span><span class="token punctuation">;</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">'rgba(0,0,0,0)'</span><span class="token punctuation">;</span>
					Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>props<span class="token punctuation">)</span>
					<span class="token keyword">return</span> <span class="token keyword">this</span>
				<span class="token punctuation">}</span>
				<span class="token function">render</span><span class="token punctuation">(</span><span class="token parameter">ctx</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
					<span class="token keyword">var</span> <span class="token punctuation">{</span>x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>r<span class="token punctuation">,</span>fillStyle<span class="token punctuation">,</span>strokeStyle<span class="token punctuation">,</span>scaleX<span class="token punctuation">,</span>scaleY<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span>
					<span class="token comment">// 保存绘图环境</span>
					ctx<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
					<span class="token comment">// 将画布坐标移动到x，y</span>
					ctx<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span>
					ctx<span class="token punctuation">.</span><span class="token function">scale</span><span class="token punctuation">(</span>scaleX<span class="token punctuation">,</span>scaleY<span class="token punctuation">)</span> 
					ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> fillStyle<span class="token punctuation">;</span>
					ctx<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> strokeStyle<span class="token punctuation">;</span>
					ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
					ctx<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>r<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">*</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span>
					ctx<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
					ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
					<span class="token comment">// 恢复绘图环境</span>
					ctx<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
					<span class="token keyword">return</span> <span class="token keyword">this</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
			<span class="token keyword">var</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#canvas'</span><span class="token punctuation">)</span>
			<span class="token keyword">var</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			
			<span class="token keyword">var</span> w <span class="token operator">=</span> canvas<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token number">500</span><span class="token punctuation">;</span>
			<span class="token keyword">var</span> h <span class="token operator">=</span> canvas<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token number">300</span>
			<span class="token comment">// 弧度</span>
			<span class="token keyword">var</span> rad <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
			<span class="token comment">// 圆环半径</span>
			<span class="token keyword">var</span> cr <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
			<span class="token comment">// 绘制小圆</span>
			<span class="token keyword">var</span> ball <span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Ball</span><span class="token punctuation">(</span><span class="token punctuation">{</span>x<span class="token punctuation">:</span>w<span class="token operator">/</span><span class="token number">2</span><span class="token operator">+</span>cr<span class="token punctuation">,</span>y<span class="token punctuation">:</span>h<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span>r<span class="token punctuation">:</span><span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">// 自执行函数</span>
			<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				window<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>move<span class="token punctuation">)</span>
				ctx<span class="token punctuation">.</span><span class="token function">clearRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>w<span class="token punctuation">,</span>h<span class="token punctuation">)</span>
				<span class="token function">drawSystem</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
				<span class="token function">drawCircle</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
				rad<span class="token operator">+=</span><span class="token number">0.02</span>
				<span class="token comment">// 通过sin,cos计算出y,x坐标</span>
				<span class="token comment">// var y = Math.sin($C.toAngle(rad) * Math.PI / 180) * cr</span>
				<span class="token comment">// var x = Math.cos($C.toAngle(rad) * Math.PI / 180) * cr</span>
				<span class="token comment">// 通过极坐标表达式:</span>
				<span class="token keyword">var</span> y <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span>rad<span class="token punctuation">)</span> <span class="token operator">*</span> cr<span class="token punctuation">;</span>
				<span class="token keyword">var</span> x <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span>rad<span class="token punctuation">)</span> <span class="token operator">*</span> cr<span class="token punctuation">;</span>
				<span class="token comment">// 由于小球的圆心在中心点,所以x,y还需要加上中心点的坐标</span>
				ball<span class="token punctuation">.</span>x <span class="token operator">=</span> w<span class="token operator">/</span><span class="token number">2</span> <span class="token operator">+</span>x<span class="token punctuation">;</span>
				ball<span class="token punctuation">.</span>y <span class="token operator">=</span> h<span class="token operator">/</span><span class="token number">2</span> <span class="token operator">+</span>y<span class="token punctuation">;</span>
				ball<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span>
				
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			<span class="token comment">// 绘制圆环</span>
			<span class="token keyword">function</span> <span class="token function">drawCircle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				ctx<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
				ctx<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span>w<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span>h<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				ctx<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span><span class="token string">'rgba(0,0,0,0.5)'</span>
				ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
				ctx<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>cr<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">*</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span>
				ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
				ctx<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
			<span class="token comment">// 绘制坐标系</span>
			<span class="token keyword">function</span> <span class="token function">drawSystem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				ctx<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
					ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
					ctx<span class="token punctuation">.</span>lineWidth <span class="token operator">=</span> <span class="token number">1.5</span>
					ctx<span class="token punctuation">.</span>strokeStyle<span class="token operator">=</span><span class="token string">'red'</span>
					ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>h<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span>
					ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span>h<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span>
					ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span>w<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>
					ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>w<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span>h<span class="token punctuation">)</span>
					ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
				ctx<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
		</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><h4 id="椭圆圆周运动"><a href="#椭圆圆周运动" aria-hidden="true" class="header-anchor">#</a> 椭圆圆周运动</h4> <p>canvas没有画椭圆的api，所以画椭圆的时候，我们只需要给正圆进行一个scale不规则的缩放，然后小球运动的时候，给y轴的值*0.6就可以了</p> <div class="language-js extra-class"><pre class="language-js"><code>ctx<span class="token punctuation">.</span><span class="token function">scale</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0.6</span><span class="token punctuation">)</span>
</code></pre></div><p><img src="images/tuoyuan.gif" alt="tuoyuan"></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
			<span class="token selector">#canvas</span><span class="token punctuation">{</span>
				<span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
				<span class="token property">margin</span><span class="token punctuation">:</span> 0 auto<span class="token punctuation">;</span>
				<span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 0 10px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0.5<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>canvas<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>../libs/utils.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
			<span class="token keyword">class</span> <span class="token class-name">Ball</span> <span class="token punctuation">{</span>
				<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>r <span class="token operator">=</span> <span class="token number">25</span><span class="token punctuation">;</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>scaleX <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>scaleY <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">'rgba(65,168,99,1)'</span><span class="token punctuation">;</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">'rgba(0,0,0,0)'</span><span class="token punctuation">;</span>
					Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>props<span class="token punctuation">)</span>
					<span class="token keyword">return</span> <span class="token keyword">this</span>
				<span class="token punctuation">}</span>
				<span class="token function">render</span><span class="token punctuation">(</span><span class="token parameter">ctx</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
					<span class="token keyword">var</span> <span class="token punctuation">{</span>x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>r<span class="token punctuation">,</span>fillStyle<span class="token punctuation">,</span>strokeStyle<span class="token punctuation">,</span>scaleX<span class="token punctuation">,</span>scaleY<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span>
					<span class="token comment">// 保存绘图环境</span>
					ctx<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
					<span class="token comment">// 将画布坐标移动到x，y</span>
					ctx<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span>
					ctx<span class="token punctuation">.</span><span class="token function">scale</span><span class="token punctuation">(</span>scaleX<span class="token punctuation">,</span>scaleY<span class="token punctuation">)</span> 
					ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> fillStyle<span class="token punctuation">;</span>
					ctx<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> strokeStyle<span class="token punctuation">;</span>
					ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
					ctx<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>r<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">*</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span>
					ctx<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
					ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
					<span class="token comment">// 恢复绘图环境</span>
					ctx<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
					<span class="token keyword">return</span> <span class="token keyword">this</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
			<span class="token keyword">var</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#canvas'</span><span class="token punctuation">)</span>
			<span class="token keyword">var</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			
			<span class="token keyword">var</span> w <span class="token operator">=</span> canvas<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token number">500</span><span class="token punctuation">;</span>
			<span class="token keyword">var</span> h <span class="token operator">=</span> canvas<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token number">300</span>
			<span class="token comment">// 弧度</span>
			<span class="token keyword">var</span> rad <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
			<span class="token comment">// 圆环半径</span>
			<span class="token keyword">var</span> cr <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
			<span class="token comment">// 绘制小圆</span>
			<span class="token keyword">var</span> ball <span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Ball</span><span class="token punctuation">(</span><span class="token punctuation">{</span>x<span class="token punctuation">:</span>w<span class="token operator">/</span><span class="token number">2</span><span class="token operator">+</span>cr<span class="token punctuation">,</span>y<span class="token punctuation">:</span>h<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span>r<span class="token punctuation">:</span><span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">// 自执行函数</span>
			<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				window<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>move<span class="token punctuation">)</span>
				ctx<span class="token punctuation">.</span><span class="token function">clearRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>w<span class="token punctuation">,</span>h<span class="token punctuation">)</span>
				<span class="token function">drawSystem</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
				<span class="token function">drawCircle</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
				rad<span class="token operator">+=</span><span class="token number">0.02</span>
				<span class="token comment">// 通过sin,cos计算出y,x坐标</span>
				<span class="token comment">// var y = Math.sin($C.toAngle(rad) * Math.PI / 180) * cr</span>
				<span class="token comment">// var x = Math.cos($C.toAngle(rad) * Math.PI / 180) * cr</span>
				<span class="token comment">// 通过极坐标表达式:</span>
				<span class="token keyword">var</span> y <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span>rad<span class="token punctuation">)</span> <span class="token operator">*</span> cr<span class="token punctuation">;</span>
				<span class="token keyword">var</span> x <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span>rad<span class="token punctuation">)</span> <span class="token operator">*</span> cr<span class="token punctuation">;</span>
				<span class="token comment">// 由于小球的圆心在中心点,所以x,y还需要加上中心点的坐标</span>
				ball<span class="token punctuation">.</span>x <span class="token operator">=</span> w<span class="token operator">/</span><span class="token number">2</span> <span class="token operator">+</span>x<span class="token punctuation">;</span>
				<span class="token comment">// 计算出的y轴 * 椭圆的缩放比0.6</span>
				ball<span class="token punctuation">.</span>y <span class="token operator">=</span> h<span class="token operator">/</span><span class="token number">2</span> <span class="token operator">+</span>y<span class="token operator">*</span><span class="token number">0.6</span><span class="token punctuation">;</span>
				ball<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span>
				
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			<span class="token comment">// 绘制圆环</span>
			<span class="token keyword">function</span> <span class="token function">drawCircle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				ctx<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
				ctx<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span>w<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span>h<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token comment">// y轴缩放到0.6,达到椭圆的效果</span>
				ctx<span class="token punctuation">.</span><span class="token function">scale</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0.6</span><span class="token punctuation">)</span>
				ctx<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span><span class="token string">'rgba(0,0,0,0.5)'</span>
				ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
				ctx<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>cr<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">*</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span>
				ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
				ctx<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
			<span class="token comment">// 绘制坐标系</span>
			<span class="token keyword">function</span> <span class="token function">drawSystem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				ctx<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
					ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
					ctx<span class="token punctuation">.</span>lineWidth <span class="token operator">=</span> <span class="token number">1.5</span>
					ctx<span class="token punctuation">.</span>strokeStyle<span class="token operator">=</span><span class="token string">'red'</span>
					ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>h<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span>
					ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span>h<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span>
					ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span>w<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>
					ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>w<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span>h<span class="token punctuation">)</span>
					ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
				ctx<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
		</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><h3 id="_1-6速度向量"><a href="#_1-6速度向量" aria-hidden="true" class="header-anchor">#</a> 1-6速度向量</h3> <p>速度是速度向量的子集，速度向量：既包括<strong>速度</strong>也包括<strong>方向</strong>。</p> <h4 id="速度向量的分解"><a href="#速度向量的分解" aria-hidden="true" class="header-anchor">#</a> 速度向量的分解</h4> <p>假如我们以速度speed=2，以30°的方向进行移动：</p> <img src="images/1611125541863.png" alt="1611125541863" style="zoom:50%;"> <p>我们要通过速度speed和角度进行计算出下x,y的坐标：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> speed <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token comment">// 30°转弧度</span>
<span class="token keyword">var</span> angle <span class="token operator">=</span> <span class="token number">30</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">180</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> x <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span>angle<span class="token punctuation">)</span> <span class="token operator">*</span> speed<span class="token punctuation">;</span>
<span class="token keyword">var</span> y <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span>angle<span class="token punctuation">)</span> <span class="token operator">*</span> speed<span class="token punctuation">;</span>
</code></pre></div><p><img src="images/vx.gif" alt="vx"></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
			<span class="token selector">#canvas</span><span class="token punctuation">{</span>
				<span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
				<span class="token property">margin</span><span class="token punctuation">:</span> 0 auto<span class="token punctuation">;</span>
				<span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 0 10px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0.5<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>canvas<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>../libs/utils.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
		
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
			<span class="token keyword">class</span> <span class="token class-name">Ball</span> <span class="token punctuation">{</span>
				<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>r <span class="token operator">=</span> <span class="token number">25</span><span class="token punctuation">;</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>scaleX <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>scaleY <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">'rgba(65,168,99,1)'</span><span class="token punctuation">;</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">'rgba(0,0,0,0)'</span><span class="token punctuation">;</span>
					Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>props<span class="token punctuation">)</span>
					<span class="token keyword">return</span> <span class="token keyword">this</span>
				<span class="token punctuation">}</span>
				<span class="token function">render</span><span class="token punctuation">(</span><span class="token parameter">ctx</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
					<span class="token keyword">var</span> <span class="token punctuation">{</span>x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>r<span class="token punctuation">,</span>fillStyle<span class="token punctuation">,</span>strokeStyle<span class="token punctuation">,</span>scaleX<span class="token punctuation">,</span>scaleY<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span>
					<span class="token comment">// 保存绘图环境</span>
					ctx<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
					<span class="token comment">// 将画布坐标移动到x，y</span>
					ctx<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span>
					ctx<span class="token punctuation">.</span><span class="token function">scale</span><span class="token punctuation">(</span>scaleX<span class="token punctuation">,</span>scaleY<span class="token punctuation">)</span> 
					ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> fillStyle<span class="token punctuation">;</span>
					ctx<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> strokeStyle<span class="token punctuation">;</span>
					ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
					ctx<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>r<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">*</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span>
					ctx<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
					ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
					<span class="token comment">// 恢复绘图环境</span>
					ctx<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
					<span class="token keyword">return</span> <span class="token keyword">this</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
			<span class="token keyword">var</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#canvas'</span><span class="token punctuation">)</span>
			<span class="token keyword">var</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			
			<span class="token keyword">var</span> w <span class="token operator">=</span> canvas<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token number">500</span><span class="token punctuation">;</span>
			<span class="token keyword">var</span> h <span class="token operator">=</span> canvas<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token number">300</span>
			
			<span class="token keyword">var</span> angle <span class="token operator">=</span> <span class="token number">30</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">180</span><span class="token punctuation">;</span> <span class="token comment">// 弧度</span>
			<span class="token keyword">var</span> speed <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// 速度</span>
			<span class="token keyword">var</span> ball <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// 小球</span>
			<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				window<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>move<span class="token punctuation">)</span>
				ctx<span class="token punctuation">.</span><span class="token function">clearRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>w<span class="token punctuation">,</span>h<span class="token punctuation">)</span>
				<span class="token comment">// 绘制坐标系</span>
				<span class="token function">drawSystem</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
				<span class="token comment">// 绘制角度线条</span>
				<span class="token function">drawLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
				<span class="token comment">// 绘制小球,按角度移动</span>
				<span class="token function">drawBall</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
				
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			<span class="token keyword">function</span> <span class="token function">drawBall</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>ball<span class="token punctuation">)</span><span class="token punctuation">{</span>
					ball <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Ball</span><span class="token punctuation">(</span><span class="token punctuation">{</span>x<span class="token punctuation">:</span>w<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span>y<span class="token punctuation">:</span>h<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span>r<span class="token punctuation">:</span><span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">var</span> x <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span>angle<span class="token punctuation">)</span><span class="token operator">*</span>speed<span class="token punctuation">;</span>
				<span class="token keyword">var</span> y <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span>angle<span class="token punctuation">)</span><span class="token operator">*</span>speed<span class="token punctuation">;</span>
				ball<span class="token punctuation">.</span>x<span class="token operator">+=</span>x<span class="token punctuation">;</span>
				ball<span class="token punctuation">.</span>y<span class="token operator">+=</span>y<span class="token punctuation">;</span>
				ball<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
			<span class="token comment">// 绘制angle角度的线条</span>
			<span class="token keyword">function</span> <span class="token function">drawLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				ctx<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
				ctx<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span>w<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span>h<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				ctx<span class="token punctuation">.</span><span class="token function">rotate</span><span class="token punctuation">(</span>angle<span class="token punctuation">)</span><span class="token punctuation">;</span>
				ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
				ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>
				ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>w<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>
				ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
				ctx<span class="token punctuation">.</span><span class="token function">closePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
				ctx<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
			<span class="token comment">// 绘制坐标系</span>
			<span class="token keyword">function</span> <span class="token function">drawSystem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				ctx<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
					ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
					ctx<span class="token punctuation">.</span>lineWidth <span class="token operator">=</span> <span class="token number">1.5</span>
					ctx<span class="token punctuation">.</span>strokeStyle<span class="token operator">=</span><span class="token string">'red'</span>
					ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>h<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span>
					ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span>h<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span>
					ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span>w<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>
					ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>w<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span>h<span class="token punctuation">)</span>
					ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
				ctx<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
		</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><h4 id="跟随鼠标的箭头"><a href="#跟随鼠标的箭头" aria-hidden="true" class="header-anchor">#</a> 跟随鼠标的箭头</h4> <p><img src="images/arrow-follow.gif" alt="arrow-follow"></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 关键代码</span>
<span class="token keyword">var</span> <span class="token punctuation">{</span>x<span class="token punctuation">,</span>y<span class="token punctuation">}</span> <span class="token operator">=</span> mouse<span class="token punctuation">;</span>
<span class="token comment">// 获取鼠标与箭头坐标的差值</span>
<span class="token keyword">var</span> dy <span class="token operator">=</span> y<span class="token operator">-</span>arrow<span class="token punctuation">.</span>y<span class="token punctuation">;</span>
<span class="token keyword">var</span> dx <span class="token operator">=</span> x<span class="token operator">-</span>arrow<span class="token punctuation">.</span>x<span class="token punctuation">;</span>
<span class="token comment">// 通过差值，计算旋转角度</span>
<span class="token keyword">var</span> angle <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">atan2</span><span class="token punctuation">(</span>dy<span class="token punctuation">,</span>dx<span class="token punctuation">)</span>
<span class="token comment">// 通过角度和速度计算出每次移动的位置</span>
<span class="token keyword">var</span> vx <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span>angle<span class="token punctuation">)</span> <span class="token operator">*</span> speed<span class="token punctuation">;</span>
<span class="token keyword">var</span> vy <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span>angle<span class="token punctuation">)</span> <span class="token operator">*</span> speed<span class="token punctuation">;</span>
arrow<span class="token punctuation">.</span>x <span class="token operator">+=</span>vx<span class="token punctuation">;</span>
arrow<span class="token punctuation">.</span>y<span class="token operator">+=</span>vy<span class="token punctuation">;</span>
arrow<span class="token punctuation">.</span>rotation <span class="token operator">=</span> angle<span class="token punctuation">;</span>
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
			<span class="token selector">#canvas</span><span class="token punctuation">{</span>
				<span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
				<span class="token property">margin</span><span class="token punctuation">:</span> 0 auto<span class="token punctuation">;</span>
				<span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 0 10px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0.5<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>canvas<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>../libs/utils.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
			<span class="token comment">// 箭头类</span>
			<span class="token keyword">class</span> <span class="token class-name">Arrow</span> <span class="token punctuation">{</span>
				<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				    <span class="token keyword">this</span><span class="token punctuation">.</span>w <span class="token operator">=</span> <span class="token number">50</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>h <span class="token operator">=</span> <span class="token number">20</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>y<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">'rgba(65,168,99,1)'</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">'rgba(0,0,0,0)'</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>rotation <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
					Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>props<span class="token punctuation">)</span>
					<span class="token keyword">return</span> <span class="token keyword">this</span>
				<span class="token punctuation">}</span>
				<span class="token function">createPath</span><span class="token punctuation">(</span><span class="token parameter">ctx</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
					<span class="token keyword">var</span> <span class="token punctuation">{</span>w<span class="token punctuation">,</span>h<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span>
					
						ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
						ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token operator">-</span>w<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token operator">-</span>h<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span>
						ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>w<span class="token operator">/</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token operator">-</span>h<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span>
						ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>w<span class="token operator">/</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token operator">-</span>h<span class="token punctuation">)</span>
						<span class="token comment">// </span>
						ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>w<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>
						ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>w<span class="token operator">/</span><span class="token number">10</span><span class="token punctuation">,</span>h<span class="token punctuation">)</span>
						ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>w<span class="token operator">/</span><span class="token number">10</span><span class="token punctuation">,</span>h<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span>
						ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token operator">-</span>w<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span>h<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span>
						ctx<span class="token punctuation">.</span><span class="token function">closePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
					
				<span class="token punctuation">}</span>
				<span class="token function">render</span><span class="token punctuation">(</span><span class="token parameter">ctx</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
					<span class="token keyword">var</span> <span class="token punctuation">{</span>strokeStyle<span class="token punctuation">,</span>fillStyle<span class="token punctuation">,</span>rotation<span class="token punctuation">,</span>x<span class="token punctuation">,</span>y<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span>
					ctx<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
						<span class="token comment">// 注意：先将位置移动到中心点，再进行旋转填充绘制。</span>
						ctx<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span>
						<span class="token comment">// 旋转</span>
						ctx<span class="token punctuation">.</span><span class="token function">rotate</span><span class="token punctuation">(</span>rotation<span class="token punctuation">)</span>
						<span class="token comment">// 设置样式</span>
						ctx<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> strokeStyle
						ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> fillStyle
						<span class="token comment">// 绘制路径</span>
						<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">createPath</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span>
						
						<span class="token comment">// 描边</span>
						ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
						<span class="token comment">// 填充</span>
						ctx<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
						
					
					ctx<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
					<span class="token keyword">return</span> <span class="token keyword">this</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
			<span class="token keyword">var</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#canvas'</span><span class="token punctuation">)</span>
			<span class="token keyword">var</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			
			<span class="token keyword">var</span> w <span class="token operator">=</span> canvas<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token number">500</span><span class="token punctuation">;</span>
			<span class="token keyword">var</span> h <span class="token operator">=</span> canvas<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token number">300</span>
			
			<span class="token comment">// 获取鼠标到canvas的距离</span>
			<span class="token keyword">var</span> mouse <span class="token operator">=</span> $<span class="token constant">C</span><span class="token punctuation">.</span><span class="token function">getOffset</span><span class="token punctuation">(</span>canvas<span class="token punctuation">)</span>
			
			<span class="token comment">// 实例化渲染箭头</span>
			<span class="token keyword">var</span> arrow <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
			<span class="token keyword">var</span> speed <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
			
			<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				window<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>move<span class="token punctuation">)</span>
				ctx<span class="token punctuation">.</span><span class="token function">clearRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>w<span class="token punctuation">,</span>h<span class="token punctuation">)</span>
				<span class="token function">drawSystem</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
				<span class="token function">drawArrowMove</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			<span class="token comment">// 绘制箭头并移动</span>
			<span class="token keyword">function</span> <span class="token function">drawArrowMove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>arrow<span class="token punctuation">)</span><span class="token punctuation">{</span>
					arrow <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Arrow</span><span class="token punctuation">(</span><span class="token punctuation">{</span>x<span class="token punctuation">:</span>w<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span>y<span class="token punctuation">:</span>h<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token comment">// 获取鼠标的位置</span>
				<span class="token keyword">var</span> <span class="token punctuation">{</span>x<span class="token punctuation">,</span>y<span class="token punctuation">}</span> <span class="token operator">=</span> mouse<span class="token punctuation">;</span>
				<span class="token keyword">var</span> dy <span class="token operator">=</span> y<span class="token operator">-</span>arrow<span class="token punctuation">.</span>y<span class="token punctuation">;</span>
				<span class="token keyword">var</span> dx <span class="token operator">=</span> x<span class="token operator">-</span>arrow<span class="token punctuation">.</span>x<span class="token punctuation">;</span>
				<span class="token keyword">var</span> angle <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">atan2</span><span class="token punctuation">(</span>dy<span class="token punctuation">,</span>dx<span class="token punctuation">)</span>
				<span class="token keyword">var</span> vx <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span>angle<span class="token punctuation">)</span> <span class="token operator">*</span> speed<span class="token punctuation">;</span>
				<span class="token keyword">var</span> vy <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span>angle<span class="token punctuation">)</span> <span class="token operator">*</span> speed<span class="token punctuation">;</span>
				arrow<span class="token punctuation">.</span>x <span class="token operator">+=</span>vx<span class="token punctuation">;</span>
				arrow<span class="token punctuation">.</span>y<span class="token operator">+=</span>vy<span class="token punctuation">;</span>
				arrow<span class="token punctuation">.</span>rotation <span class="token operator">=</span> angle<span class="token punctuation">;</span>
				arrow<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
			<span class="token comment">// 绘制坐标系</span>
			<span class="token keyword">function</span> <span class="token function">drawSystem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				ctx<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
					ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
					ctx<span class="token punctuation">.</span>lineWidth <span class="token operator">=</span> <span class="token number">1.5</span>
					ctx<span class="token punctuation">.</span>strokeStyle<span class="token operator">=</span><span class="token string">'red'</span>
					ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>h<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span>
					ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span>h<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span>
					ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span>w<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>
					ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>w<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span>h<span class="token punctuation">)</span>
					ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
				ctx<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
		</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><h3 id="_1-7加速度"><a href="#_1-7加速度" aria-hidden="true" class="header-anchor">#</a> 1-7加速度</h3> <img src="images/1611131658793.png" alt="1611131658793" style="zoom:50%;"> <h4 id="单轴上的加速度"><a href="#单轴上的加速度" aria-hidden="true" class="header-anchor">#</a> 单轴上的加速度</h4> <div class="language-bash extra-class"><pre class="language-bash"><code>// x 位置  vx 起始速度 a 加速度
X <span class="token operator">+=</span> Vx
Vx <span class="token operator">+=</span> a

</code></pre></div><p><img src="images/va.gif" alt="vx"></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
			<span class="token selector">#canvas</span><span class="token punctuation">{</span>
				<span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
				<span class="token property">margin</span><span class="token punctuation">:</span> 0 auto<span class="token punctuation">;</span>
				<span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 0 10px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0.5<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>canvas<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>../libs/utils.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>../components/ball.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
			<span class="token keyword">var</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#canvas'</span><span class="token punctuation">)</span>
			<span class="token keyword">var</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			
			<span class="token keyword">var</span> w <span class="token operator">=</span> canvas<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token number">500</span><span class="token punctuation">;</span>
			<span class="token keyword">var</span> h <span class="token operator">=</span> canvas<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token number">300</span>
			
			<span class="token keyword">var</span> ball <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Ball</span><span class="token punctuation">(</span><span class="token punctuation">{</span>x<span class="token punctuation">:</span><span class="token number">10</span><span class="token punctuation">,</span>y<span class="token punctuation">:</span>h<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span>r<span class="token punctuation">:</span><span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">// 起始速度</span>
			<span class="token keyword">var</span> vx <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
			<span class="token comment">// 加速度</span>
			<span class="token keyword">var</span> va <span class="token operator">=</span> <span class="token number">0.1</span><span class="token punctuation">;</span>
			<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				window<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>move<span class="token punctuation">)</span>
				ctx<span class="token punctuation">.</span><span class="token function">clearRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>w<span class="token punctuation">,</span>h<span class="token punctuation">)</span>
				<span class="token comment">// 小球的x轴 +=起始速度</span>
				ball<span class="token punctuation">.</span>x<span class="token operator">+=</span>vx
				<span class="token comment">// 速度+=加速度</span>
				vx<span class="token operator">+=</span>va
				ball<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><h4 id="任意方向上的加速度"><a href="#任意方向上的加速度" aria-hidden="true" class="header-anchor">#</a> 任意方向上的加速度</h4> <img src="images/1611132875120.png" alt="1611132875120" style="zoom:50%;"> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
			<span class="token selector">#canvas</span><span class="token punctuation">{</span>
				<span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
				<span class="token property">margin</span><span class="token punctuation">:</span> 0 auto<span class="token punctuation">;</span>
				<span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 0 10px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0.5<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>canvas<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>../libs/utils.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>../components/ball.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
			<span class="token keyword">var</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#canvas'</span><span class="token punctuation">)</span>
			<span class="token keyword">var</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			
			<span class="token keyword">var</span> w <span class="token operator">=</span> canvas<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token number">500</span><span class="token punctuation">;</span>
			<span class="token keyword">var</span> h <span class="token operator">=</span> canvas<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token number">300</span>
			
			<span class="token comment">// 初始速度      加速度    半径</span>
			<span class="token keyword">var</span> vx <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>vy<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>va <span class="token operator">=</span> <span class="token number">0.1</span><span class="token punctuation">,</span>r<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">;</span>
			<span class="token keyword">var</span> angle <span class="token operator">=</span> $<span class="token constant">C</span><span class="token punctuation">.</span><span class="token function">toRad</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span>
			<span class="token keyword">var</span> ball <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Ball</span><span class="token punctuation">(</span><span class="token punctuation">{</span>x<span class="token punctuation">:</span>vx<span class="token punctuation">,</span>y<span class="token punctuation">:</span>vy<span class="token punctuation">,</span>r<span class="token punctuation">:</span>r<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				window<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>move<span class="token punctuation">)</span>
				ctx<span class="token punctuation">.</span><span class="token function">clearRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>w<span class="token punctuation">,</span>h<span class="token punctuation">)</span>
				<span class="token comment">// 根据加速度和角度，获取x,y轴的坐标</span>
				<span class="token keyword">var</span> dx <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span>angle<span class="token punctuation">)</span> <span class="token operator">*</span> va<span class="token punctuation">;</span>
				<span class="token keyword">var</span> dy <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span>angle<span class="token punctuation">)</span> <span class="token operator">*</span> va<span class="token punctuation">;</span>
				<span class="token comment">// 小球的x，y轴 +=起始速度</span>
				ball<span class="token punctuation">.</span>x <span class="token operator">+=</span> vx
				ball<span class="token punctuation">.</span>y <span class="token operator">+=</span> vy
				ball<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span>
				<span class="token comment">// 起始速度+=x,y轴的加速度</span>
				vx <span class="token operator">+=</span> dx<span class="token punctuation">;</span>
				vy <span class="token operator">+=</span> dy<span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><h4 id="重力加速度"><a href="#重力加速度" aria-hidden="true" class="header-anchor">#</a> 重力加速度</h4> <p>重力加速度，物理学名词。重力对自由下落的物体产生的加速度，称为重力加速度。</p> <p>以<em>g</em>表示重力加速度， 重力加速度是一个恒定的矢量，</p> <p>这就决定了自由落体运动实质上是<strong>一个初速度为零</strong>的<strong>匀加速直线运动</strong></p> <p><img src="images/ga.gif" alt="ga"></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
			<span class="token selector">#canvas</span><span class="token punctuation">{</span>
				<span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
				<span class="token property">margin</span><span class="token punctuation">:</span> 40px auto<span class="token punctuation">;</span>
				<span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 0 10px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0.5<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>canvas<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>../libs/utils.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>../components/ball.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
			<span class="token keyword">var</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#canvas'</span><span class="token punctuation">)</span>
			<span class="token keyword">var</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			
			<span class="token keyword">var</span> w <span class="token operator">=</span> canvas<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token number">500</span><span class="token punctuation">;</span>
			<span class="token keyword">var</span> h <span class="token operator">=</span> canvas<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token number">300</span>
			<span class="token comment">// 初速度=0，g = 0.1,小球半径=10</span>
			<span class="token keyword">var</span> vy <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>g<span class="token operator">=</span><span class="token number">0.1</span><span class="token punctuation">,</span>r<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">;</span>
			<span class="token keyword">var</span> ball <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Ball</span><span class="token punctuation">(</span><span class="token punctuation">{</span>x<span class="token punctuation">:</span>w<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span>y<span class="token punctuation">:</span>r<span class="token punctuation">,</span>r<span class="token punctuation">:</span>r<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				window<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>move<span class="token punctuation">)</span><span class="token punctuation">;</span>
				ctx<span class="token punctuation">.</span><span class="token function">clearRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>w<span class="token punctuation">,</span>h<span class="token punctuation">)</span>
				<span class="token comment">// y轴速度+=加速度</span>
				vy<span class="token operator">+=</span>g<span class="token punctuation">;</span>
				<span class="token comment">// 小球的y轴+=y轴的速度</span>
				ball<span class="token punctuation">.</span>y <span class="token operator">+=</span>vy<span class="token punctuation">;</span>
				ball<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span>
				<span class="token comment">// 如果小球的y轴+半径比画布大，那么小球回到画布内，并且改变速度的方向，速度每次递减</span>
				<span class="token keyword">if</span><span class="token punctuation">(</span>ball<span class="token punctuation">.</span>y<span class="token operator">+</span>ball<span class="token punctuation">.</span>r<span class="token operator">&gt;=</span>h<span class="token punctuation">)</span><span class="token punctuation">{</span>
					ball<span class="token punctuation">.</span>y <span class="token operator">=</span> h<span class="token operator">-</span>ball<span class="token punctuation">.</span>r<span class="token punctuation">;</span>
					vy<span class="token operator">*=</span><span class="token operator">-</span><span class="token number">0.8</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			
		</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><h2 id="_2-边界和摩檫力"><a href="#_2-边界和摩檫力" aria-hidden="true" class="header-anchor">#</a> 2-边界和摩檫力</h2> <h3 id="_2-1环境边界"><a href="#_2-1环境边界" aria-hidden="true" class="header-anchor">#</a> 2-1环境边界</h3> <p>环境边界，有以下几种越界处理  方式：</p> <ul><li><p>将物体移除。</p></li> <li><p>将物体设置回边界内，就像产生了一个新的物体一样。</p></li> <li><p>让同一个物体出现在边界的另一个位置。</p></li> <li><p>将物体反弹回到边界内。</p></li></ul> <h4 id="将物体移除"><a href="#将物体移除" aria-hidden="true" class="header-anchor">#</a> 将物体移除</h4> <p>物体移动，超出边界，将物体移除</p> <p><img src="images/remove-box.gif" alt="remove-box"></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//ball.js  增加了自身的速度</span>
<span class="token keyword">class</span> <span class="token class-name">Ball</span> <span class="token punctuation">{</span>
	<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>r <span class="token operator">=</span> <span class="token number">25</span><span class="token punctuation">;</span>
        <span class="token comment">// 增加了自身的速度</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>vx <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// x轴速度</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>vy <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// y轴速度</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>scaleX <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>scaleY <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">'rgba(65,168,99,1)'</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">'rgba(0,0,0,0)'</span><span class="token punctuation">;</span>
		Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>props<span class="token punctuation">)</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span>
	<span class="token punctuation">}</span>
	<span class="token function">render</span><span class="token punctuation">(</span><span class="token parameter">ctx</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">var</span> <span class="token punctuation">{</span>x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>r<span class="token punctuation">,</span>fillStyle<span class="token punctuation">,</span>strokeStyle<span class="token punctuation">,</span>scaleX<span class="token punctuation">,</span>scaleY<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span>
		<span class="token comment">// 保存绘图环境</span>
		ctx<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token comment">// 将画布坐标移动到x，y</span>
		ctx<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span>
		ctx<span class="token punctuation">.</span><span class="token function">scale</span><span class="token punctuation">(</span>scaleX<span class="token punctuation">,</span>scaleY<span class="token punctuation">)</span> 
		ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> fillStyle<span class="token punctuation">;</span>
		ctx<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> strokeStyle<span class="token punctuation">;</span>
		ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		ctx<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>r<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">*</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span>
		ctx<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token comment">// 恢复绘图环境</span>
		ctx<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
			<span class="token selector">#canvas</span><span class="token punctuation">{</span>
				<span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
				<span class="token property">margin</span><span class="token punctuation">:</span> 0 auto<span class="token punctuation">;</span>
				<span class="token property">background-color</span><span class="token punctuation">:</span> #000<span class="token punctuation">;</span>
				<span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 0 10px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0.5<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>canvas<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>../libs/utils.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>../components/ball.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
			<span class="token keyword">var</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#canvas'</span><span class="token punctuation">)</span>
			<span class="token keyword">var</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			
			<span class="token keyword">var</span> w <span class="token operator">=</span> canvas<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token number">500</span><span class="token punctuation">;</span>
			<span class="token keyword">var</span> h <span class="token operator">=</span> canvas<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token number">300</span>
			<span class="token comment">// 创建一个对象池。</span>
			<span class="token keyword">var</span> balls <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
			<span class="token comment">// 小球个数</span>
			<span class="token keyword">var</span> ballNum <span class="token operator">=</span> <span class="token number">20</span>
			<span class="token comment">// 创建小球对象</span>
			<span class="token function">createBalls</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			
			<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				window<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>move<span class="token punctuation">)</span><span class="token punctuation">;</span>
				ctx<span class="token punctuation">.</span><span class="token function">clearRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>w<span class="token punctuation">,</span>h<span class="token punctuation">)</span>
				<span class="token function">ballMove</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			<span class="token comment">// 小球移动</span>
			<span class="token keyword">function</span> <span class="token function">ballMove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				<span class="token keyword">var</span> i <span class="token operator">=</span> balls<span class="token punctuation">.</span>length
				<span class="token keyword">while</span><span class="token punctuation">(</span>i<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
					<span class="token keyword">var</span> ball <span class="token operator">=</span> balls<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
					<span class="token comment">// x,y坐标+=初始速度</span>
					ball<span class="token punctuation">.</span>x<span class="token operator">+=</span>ball<span class="token punctuation">.</span>vx
					ball<span class="token punctuation">.</span>y<span class="token operator">+=</span>ball<span class="token punctuation">.</span>vy
					ball<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token comment">// 判断边界，移除小球</span>
					<span class="token keyword">if</span><span class="token punctuation">(</span>ball<span class="token punctuation">.</span>x <span class="token operator">-</span> ball<span class="token punctuation">.</span>r <span class="token operator">&gt;=</span>w <span class="token operator">||</span> ball<span class="token punctuation">.</span>x <span class="token operator">+</span> ball<span class="token punctuation">.</span>r<span class="token operator">&lt;=</span><span class="token number">0</span> <span class="token operator">||</span> ball<span class="token punctuation">.</span>y <span class="token operator">-</span>ball<span class="token punctuation">.</span>r<span class="token operator">&gt;=</span>h <span class="token operator">||</span> ball<span class="token punctuation">.</span>y <span class="token operator">+</span> ball<span class="token punctuation">.</span>r<span class="token operator">&lt;=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
						<span class="token keyword">if</span><span class="token punctuation">(</span>balls<span class="token punctuation">.</span>length<span class="token operator">===</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
							console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'小球全部移除了'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
							console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'小球:'</span><span class="token operator">+</span>ball<span class="token punctuation">.</span>id<span class="token operator">+</span><span class="token string">'被移除了'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
                        <span class="token comment">// 移除</span>
						balls<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
			<span class="token comment">// 创建小球对象</span>
			<span class="token keyword">function</span> <span class="token function">createBalls</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>ballNum<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
					balls<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Ball</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
						x<span class="token punctuation">:</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span>w<span class="token punctuation">,</span>
						y<span class="token punctuation">:</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span>h<span class="token punctuation">,</span>
						r<span class="token punctuation">:</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">20</span><span class="token operator">+</span><span class="token number">30</span><span class="token punctuation">,</span>
						fillStyle<span class="token punctuation">:</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">rgba(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">parseInt</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">200</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token number">55</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">parseInt</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">200</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token number">55</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">parseInt</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">200</span><span class="token punctuation">)</span> <span class="token operator">+</span><span class="token number">55</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,1)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
						<span class="token comment">// 初始速度-0.5 - 0.5之间</span>
						vx<span class="token punctuation">:</span><span class="token number">3</span><span class="token operator">*</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token punctuation">,</span>
						vy<span class="token punctuation">:</span><span class="token number">3</span><span class="token operator">*</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
						id<span class="token punctuation">:</span><span class="token string">'ball'</span><span class="token operator">+</span>i
					<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
				<span class="token punctuation">}</span>
				
			<span class="token punctuation">}</span>
			
		</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><blockquote><p>**注意：**小球循环移动的时候，采用的while循环比for性能高，for循环小球会闪动。</p></blockquote> <h4 id="重置物体"><a href="#重置物体" aria-hidden="true" class="header-anchor">#</a> 重置物体</h4> <p>将超出边界的物体，设置回边界内，就像产生了一个新的物体一样。</p> <p>如下：将超出边界的物体，设置回canvas底部中间位置，并且重新设置速度。</p> <p><img src="images/rest-box.gif" alt="rest-box"></p> <p>这里封装了2个函数:</p> <p><code>$C.random()</code> ：生成随机数</p> <p><code>$C.createColor()</code>  ：生成随机颜色</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
	 * 生成随机数
	 * @param {Object} arr 最大最小数数组[10,20]
	 * @param {Object} int 是否生成整数
	 */</span>
	<span class="token class-name">C</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">random</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">arr<span class="token punctuation">,</span>int</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">var</span> max <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token operator">...</span>arr<span class="token punctuation">)</span>
		<span class="token keyword">var</span> min <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token operator">...</span>arr<span class="token punctuation">)</span>
		<span class="token keyword">var</span> random <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>max<span class="token operator">-</span>min<span class="token punctuation">)</span> <span class="token operator">+</span> min 
		<span class="token keyword">return</span> int<span class="token operator">?</span><span class="token function">parseInt</span><span class="token punctuation">(</span>random<span class="token punctuation">)</span><span class="token punctuation">:</span>random
	<span class="token punctuation">}</span>
	<span class="token comment">/**
	 * 生成随机颜色
	 */</span>
	<span class="token class-name">C</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">createColor</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">rgb(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token number">55</span><span class="token operator">+</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token number">55</span><span class="token operator">+</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token number">55</span><span class="token operator">+</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)</span><span class="token template-punctuation string">`</span></span>
	<span class="token punctuation">}</span>
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
			<span class="token selector">#canvas</span><span class="token punctuation">{</span>
				<span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
				<span class="token property">margin</span><span class="token punctuation">:</span> 20px auto<span class="token punctuation">;</span>
				<span class="token property">background-color</span><span class="token punctuation">:</span> #000<span class="token punctuation">;</span>
				<span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 0 10px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0.5<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>canvas<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>../libs/utils.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>../components/ball.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
			<span class="token keyword">var</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#canvas'</span><span class="token punctuation">)</span>
			<span class="token keyword">var</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			
			<span class="token keyword">var</span> w <span class="token operator">=</span> canvas<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token number">500</span><span class="token punctuation">;</span>
			<span class="token keyword">var</span> h <span class="token operator">=</span> canvas<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token number">300</span>
			<span class="token comment">// 对象池</span>
			<span class="token keyword">var</span> balls <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token comment">// 加速度</span>
			<span class="token keyword">var</span> g <span class="token operator">=</span> <span class="token number">0.05</span><span class="token punctuation">;</span>
			<span class="token function">createBall</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				window<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>move<span class="token punctuation">)</span>
				ctx<span class="token punctuation">.</span><span class="token function">clearRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>w<span class="token punctuation">,</span>h<span class="token punctuation">)</span>
				
				<span class="token keyword">var</span> i <span class="token operator">=</span> balls<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
				<span class="token keyword">while</span><span class="token punctuation">(</span>i<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
					<span class="token function">ballMove</span><span class="token punctuation">(</span>balls<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>i<span class="token punctuation">)</span>
				<span class="token punctuation">}</span>
				
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			
			<span class="token comment">// 小球移动</span>
			<span class="token keyword">function</span> <span class="token function">ballMove</span><span class="token punctuation">(</span><span class="token parameter">ball<span class="token punctuation">,</span>index</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				ball<span class="token punctuation">.</span>x <span class="token operator">+=</span>ball<span class="token punctuation">.</span>vx<span class="token punctuation">;</span>
				ball<span class="token punctuation">.</span>y <span class="token operator">+=</span>ball<span class="token punctuation">.</span>vy<span class="token punctuation">;</span>
				ball<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token comment">// 物体上升vy是负值，所以当加上加速度vy为正值的时候，物体就会下落。</span>
				ball<span class="token punctuation">.</span>vy <span class="token operator">+=</span>g<span class="token punctuation">;</span>
				<span class="token comment">// 超出边界，重置物体，将物体移动到画布底部中间位置</span>
				<span class="token keyword">if</span><span class="token punctuation">(</span>ball<span class="token punctuation">.</span>x<span class="token operator">-</span>ball<span class="token punctuation">.</span>r<span class="token operator">&gt;=</span>w <span class="token operator">||</span> ball<span class="token punctuation">.</span>x<span class="token operator">+</span>ball<span class="token punctuation">.</span>r<span class="token operator">&lt;=</span><span class="token number">0</span> <span class="token operator">||</span> ball<span class="token punctuation">.</span>y<span class="token operator">-</span>ball<span class="token punctuation">.</span>r<span class="token operator">&gt;=</span>h <span class="token operator">||</span> ball<span class="token punctuation">.</span>y<span class="token operator">+</span>ball<span class="token punctuation">.</span>r<span class="token operator">&lt;=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
					ball<span class="token punctuation">.</span>x<span class="token operator">=</span>w<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span>
					ball<span class="token punctuation">.</span>y<span class="token operator">=</span>h<span class="token punctuation">,</span>
					ball<span class="token punctuation">.</span>vx<span class="token operator">=</span>$<span class="token constant">C</span><span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
					ball<span class="token punctuation">.</span>vy<span class="token operator">=</span>$<span class="token constant">C</span><span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
			<span class="token comment">// 创建小球</span>
			<span class="token keyword">function</span> <span class="token function">createBall</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">100</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
					balls<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Ball</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
						x<span class="token punctuation">:</span>w<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span>
						y<span class="token punctuation">:</span>h<span class="token punctuation">,</span>
						r<span class="token punctuation">:</span>$<span class="token constant">C</span><span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
						fillStyle<span class="token punctuation">:</span>$<span class="token constant">C</span><span class="token punctuation">.</span><span class="token function">createColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
						<span class="token comment">//vx,初始速度为负值,物体向左移动，为正值，物体向右移动。</span>
						vx<span class="token punctuation">:</span>$<span class="token constant">C</span><span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
						<span class="token comment">// vy初始速度为负值，物体运动上升</span>
						vy<span class="token punctuation">:</span>$<span class="token constant">C</span><span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
					<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
			
		</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>

</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">2/24/2021, 3:57:36 PM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.ee223f02.js" defer></script><script src="/blog/assets/js/2.f364336e.js" defer></script><script src="/blog/assets/js/33.1707ffb1.js" defer></script>
  </body>
</html>
