<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>gulp多页面应用脚手架 | 前端开发笔记</title>
    <meta name="description" content="前端开发笔记">
    <link rel="icon" href="/blog/icon.ico">
    
    <link rel="preload" href="/blog/assets/css/0.styles.45e5a3ae.css" as="style"><link rel="preload" href="/blog/assets/js/app.ee223f02.js" as="script"><link rel="preload" href="/blog/assets/js/2.f364336e.js" as="script"><link rel="preload" href="/blog/assets/js/24.8df026f6.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.60d9a5c4.js"><link rel="prefetch" href="/blog/assets/js/11.9d12addb.js"><link rel="prefetch" href="/blog/assets/js/12.8ef0bd8a.js"><link rel="prefetch" href="/blog/assets/js/13.71ffc42f.js"><link rel="prefetch" href="/blog/assets/js/14.25b3510a.js"><link rel="prefetch" href="/blog/assets/js/15.c4d91af5.js"><link rel="prefetch" href="/blog/assets/js/16.948c6a33.js"><link rel="prefetch" href="/blog/assets/js/17.0e6c3b39.js"><link rel="prefetch" href="/blog/assets/js/18.5f7af77b.js"><link rel="prefetch" href="/blog/assets/js/19.3d23eaff.js"><link rel="prefetch" href="/blog/assets/js/20.472050f8.js"><link rel="prefetch" href="/blog/assets/js/21.daaff1eb.js"><link rel="prefetch" href="/blog/assets/js/22.ae3ff2ee.js"><link rel="prefetch" href="/blog/assets/js/23.06d58a4e.js"><link rel="prefetch" href="/blog/assets/js/25.8fa3c5ac.js"><link rel="prefetch" href="/blog/assets/js/26.b9e79cc9.js"><link rel="prefetch" href="/blog/assets/js/27.0c29d378.js"><link rel="prefetch" href="/blog/assets/js/28.5c6b388b.js"><link rel="prefetch" href="/blog/assets/js/29.a0f69e48.js"><link rel="prefetch" href="/blog/assets/js/3.641e1028.js"><link rel="prefetch" href="/blog/assets/js/30.dc7fbcb3.js"><link rel="prefetch" href="/blog/assets/js/31.a0f54c32.js"><link rel="prefetch" href="/blog/assets/js/32.06b2a848.js"><link rel="prefetch" href="/blog/assets/js/33.1707ffb1.js"><link rel="prefetch" href="/blog/assets/js/34.4a894dbb.js"><link rel="prefetch" href="/blog/assets/js/35.380e3cca.js"><link rel="prefetch" href="/blog/assets/js/36.cbda8a08.js"><link rel="prefetch" href="/blog/assets/js/37.a4ee9d32.js"><link rel="prefetch" href="/blog/assets/js/38.9d939308.js"><link rel="prefetch" href="/blog/assets/js/39.0db069f8.js"><link rel="prefetch" href="/blog/assets/js/4.dd025489.js"><link rel="prefetch" href="/blog/assets/js/40.7207834f.js"><link rel="prefetch" href="/blog/assets/js/41.a0452c50.js"><link rel="prefetch" href="/blog/assets/js/42.2122454f.js"><link rel="prefetch" href="/blog/assets/js/43.8bb0a71b.js"><link rel="prefetch" href="/blog/assets/js/44.3e769886.js"><link rel="prefetch" href="/blog/assets/js/5.2cc523f9.js"><link rel="prefetch" href="/blog/assets/js/6.86e346f0.js"><link rel="prefetch" href="/blog/assets/js/7.d17b9335.js"><link rel="prefetch" href="/blog/assets/js/8.b2177cb3.js"><link rel="prefetch" href="/blog/assets/js/9.a8aca7d1.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.45e5a3ae.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">前端开发笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">主页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/framework/jquery/" class="nav-link">jquery源码分析</a></li><li class="dropdown-item"><!----> <a href="/blog/vue/" class="nav-link">vue最佳实践</a></li><li class="dropdown-item"><!----> <a href="/blog/vue/mobile-base-template.html" class="nav-link">vue移动端模版</a></li><li class="dropdown-item"><!----> <a href="/blog/typescript/" class="nav-link">typescript</a></li><li class="dropdown-item"><!----> <a href="/blog/mina/" class="nav-link">微信小程序</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">工具</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/tools/dd-utils.html" class="nav-link">自定义工具函数库</a></li><li class="dropdown-item"><!----> <a href="/blog/vscode-plugins/" class="nav-link">vscode常用插件</a></li><li class="dropdown-item"><!----> <a href="/blog/vuepress/" class="nav-link">vuepress</a></li><li class="dropdown-item"><!----> <a href="/blog/git/" class="nav-link">git</a></li><li class="dropdown-item"><!----> <a href="/blog/mock/" class="nav-link">mock</a></li><li class="dropdown-item"><!----> <a href="/blog/tools/" class="nav-link">工具函數</a></li><li class="dropdown-item"><!----> <a href="/blog/tools/date.html" class="nav-link">日期函數</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/mongoDB/" class="nav-link">mongoDB学习</a></li><li class="dropdown-item"><!----> <a href="/blog/mongoDB/learning/aggregate.html" class="nav-link">mongoDB aggregate</a></li><li class="dropdown-item"><!----> <a href="/blog/mongoDB/learning/mongoose.html" class="nav-link">mongoose</a></li><li class="dropdown-item"><!----> <a href="/blog/Redis/" class="nav-link">Redis</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">可视化</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/svg-canvas/svg.html" class="nav-link">svg</a></li><li class="dropdown-item"><!----> <a href="/blog/svg-canvas/canvas.html" class="nav-link">canvas</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">electron</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/electron/" class="nav-link">electron 基础</a></li><li class="dropdown-item"><!----> <a href="/blog/electron/meos.html" class="nav-link">electron 进阶</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">egg</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/egg/" class="nav-link">egg最佳实践</a></li><li class="dropdown-item"><!----> <a href="/blog/egg/ask.html" class="nav-link">egg ask项目后端</a></li><li class="dropdown-item"><!----> <a href="/blog/egg/ask-client.html" class="nav-link">egg ask项目前端</a></li><li class="dropdown-item"><!----> <a href="/blog/egg/ask-client.html" class="nav-link">egg ask项目管理平台</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">uniapp</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/uniapp/xiaomi.html" class="nav-link">项目实战-xiaomi</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/scaffold/" class="nav-link">手撸一个前端脚手架</a></li><li class="dropdown-item"><!----> <a href="/blog/gulp_multi_pages/" class="nav-link router-link-exact-active router-link-active">gulp多页面应用脚手架</a></li><li class="dropdown-item"><!----> <a href="/blog/regexp/" class="nav-link">正则学习</a></li><li class="dropdown-item"><!----> <a href="/blog/webapp/" class="nav-link">webapp</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/MrMoveon/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">主页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/framework/jquery/" class="nav-link">jquery源码分析</a></li><li class="dropdown-item"><!----> <a href="/blog/vue/" class="nav-link">vue最佳实践</a></li><li class="dropdown-item"><!----> <a href="/blog/vue/mobile-base-template.html" class="nav-link">vue移动端模版</a></li><li class="dropdown-item"><!----> <a href="/blog/typescript/" class="nav-link">typescript</a></li><li class="dropdown-item"><!----> <a href="/blog/mina/" class="nav-link">微信小程序</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">工具</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/tools/dd-utils.html" class="nav-link">自定义工具函数库</a></li><li class="dropdown-item"><!----> <a href="/blog/vscode-plugins/" class="nav-link">vscode常用插件</a></li><li class="dropdown-item"><!----> <a href="/blog/vuepress/" class="nav-link">vuepress</a></li><li class="dropdown-item"><!----> <a href="/blog/git/" class="nav-link">git</a></li><li class="dropdown-item"><!----> <a href="/blog/mock/" class="nav-link">mock</a></li><li class="dropdown-item"><!----> <a href="/blog/tools/" class="nav-link">工具函數</a></li><li class="dropdown-item"><!----> <a href="/blog/tools/date.html" class="nav-link">日期函數</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/mongoDB/" class="nav-link">mongoDB学习</a></li><li class="dropdown-item"><!----> <a href="/blog/mongoDB/learning/aggregate.html" class="nav-link">mongoDB aggregate</a></li><li class="dropdown-item"><!----> <a href="/blog/mongoDB/learning/mongoose.html" class="nav-link">mongoose</a></li><li class="dropdown-item"><!----> <a href="/blog/Redis/" class="nav-link">Redis</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">可视化</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/svg-canvas/svg.html" class="nav-link">svg</a></li><li class="dropdown-item"><!----> <a href="/blog/svg-canvas/canvas.html" class="nav-link">canvas</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">electron</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/electron/" class="nav-link">electron 基础</a></li><li class="dropdown-item"><!----> <a href="/blog/electron/meos.html" class="nav-link">electron 进阶</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">egg</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/egg/" class="nav-link">egg最佳实践</a></li><li class="dropdown-item"><!----> <a href="/blog/egg/ask.html" class="nav-link">egg ask项目后端</a></li><li class="dropdown-item"><!----> <a href="/blog/egg/ask-client.html" class="nav-link">egg ask项目前端</a></li><li class="dropdown-item"><!----> <a href="/blog/egg/ask-client.html" class="nav-link">egg ask项目管理平台</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">uniapp</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/uniapp/xiaomi.html" class="nav-link">项目实战-xiaomi</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/scaffold/" class="nav-link">手撸一个前端脚手架</a></li><li class="dropdown-item"><!----> <a href="/blog/gulp_multi_pages/" class="nav-link router-link-exact-active router-link-active">gulp多页面应用脚手架</a></li><li class="dropdown-item"><!----> <a href="/blog/regexp/" class="nav-link">正则学习</a></li><li class="dropdown-item"><!----> <a href="/blog/webapp/" class="nav-link">webapp</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/MrMoveon/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>gulp多页面应用脚手架</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/gulp_multi_pages/#前言" class="sidebar-link">前言</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/gulp_multi_pages/#目录设计" class="sidebar-link">目录设计</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/gulp_multi_pages/#用到的插件" class="sidebar-link">用到的插件</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/gulp_multi_pages/#从0开始搭建" class="sidebar-link">从0开始搭建</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/gulp_multi_pages/#安装-gulp-命令行工具" class="sidebar-link">安装 gulp 命令行工具</a></li><li class="sidebar-sub-header"><a href="/blog/gulp_multi_pages/#创建项目目录并进入" class="sidebar-link">创建项目目录并进入</a></li><li class="sidebar-sub-header"><a href="/blog/gulp_multi_pages/#在项目目录下创建-package-json-文件" class="sidebar-link">在项目目录下创建 package.json 文件</a></li><li class="sidebar-sub-header"><a href="/blog/gulp_multi_pages/#安装-gulp，作为开发时依赖项" class="sidebar-link">安装 gulp，作为开发时依赖项</a></li><li class="sidebar-sub-header"><a href="/blog/gulp_multi_pages/#检查-gulp-版本" class="sidebar-link">检查 gulp 版本</a></li><li class="sidebar-sub-header"><a href="/blog/gulp_multi_pages/#创建-gulpfile-文件" class="sidebar-link">创建 gulpfile 文件</a></li><li class="sidebar-sub-header"><a href="/blog/gulp_multi_pages/#测试" class="sidebar-link">测试</a></li><li class="sidebar-sub-header"><a href="/blog/gulp_multi_pages/#复制、监控文件" class="sidebar-link">复制、监控文件</a></li><li class="sidebar-sub-header"><a href="/blog/gulp_multi_pages/#less-scss编译" class="sidebar-link">less/scss编译</a></li><li class="sidebar-sub-header"><a href="/blog/gulp_multi_pages/#css文件合并" class="sidebar-link">css文件合并</a></li><li class="sidebar-sub-header"><a href="/blog/gulp_multi_pages/#css文件压缩" class="sidebar-link">css文件压缩</a></li><li class="sidebar-sub-header"><a href="/blog/gulp_multi_pages/#删除文件" class="sidebar-link">删除文件</a></li><li class="sidebar-sub-header"><a href="/blog/gulp_multi_pages/#js文件操作" class="sidebar-link">js文件操作</a></li><li class="sidebar-sub-header"><a href="/blog/gulp_multi_pages/#图片压缩" class="sidebar-link">图片压缩</a></li><li class="sidebar-sub-header"><a href="/blog/gulp_multi_pages/#雪碧图" class="sidebar-link">雪碧图</a></li><li class="sidebar-sub-header"><a href="/blog/gulp_multi_pages/#base64" class="sidebar-link">base64</a></li><li class="sidebar-sub-header"><a href="/blog/gulp_multi_pages/#浏览器实时刷新" class="sidebar-link">浏览器实时刷新</a></li><li class="sidebar-sub-header"><a href="/blog/gulp_multi_pages/#启动本地服务器" class="sidebar-link">启动本地服务器</a></li><li class="sidebar-sub-header"><a href="/blog/gulp_multi_pages/#设置代理" class="sidebar-link">设置代理</a></li><li class="sidebar-sub-header"><a href="/blog/gulp_multi_pages/#项目通知" class="sidebar-link">项目通知</a></li><li class="sidebar-sub-header"><a href="/blog/gulp_multi_pages/#打包缓存" class="sidebar-link">打包缓存</a></li><li class="sidebar-sub-header"><a href="/blog/gulp_multi_pages/#多环境判断" class="sidebar-link">多环境判断</a></li><li class="sidebar-sub-header"><a href="/blog/gulp_multi_pages/#多环境配置" class="sidebar-link">多环境配置</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="gulp多页面应用脚手架"><a href="#gulp多页面应用脚手架" aria-hidden="true" class="header-anchor">#</a> gulp多页面应用脚手架</h1> <h2 id="前言"><a href="#前言" aria-hidden="true" class="header-anchor">#</a> 前言</h2> <p>说明脚手架的用途</p> <h2 id="目录设计"><a href="#目录设计" aria-hidden="true" class="header-anchor">#</a> 目录设计</h2> <h2 id="用到的插件"><a href="#用到的插件" aria-hidden="true" class="header-anchor">#</a> 用到的插件</h2> <h2 id="从0开始搭建"><a href="#从0开始搭建" aria-hidden="true" class="header-anchor">#</a> 从0开始搭建</h2> <h3 id="安装-gulp-命令行工具"><a href="#安装-gulp-命令行工具" aria-hidden="true" class="header-anchor">#</a> 安装 gulp 命令行工具</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> gulp-cli -g
</code></pre></div><h3 id="创建项目目录并进入"><a href="#创建项目目录并进入" aria-hidden="true" class="header-anchor">#</a> 创建项目目录并进入</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 创建目录</span>
<span class="token function">mkdir</span> gulp_multi_pages
<span class="token comment"># 进入目录</span>
<span class="token builtin class-name">cd</span> gulp_multi_pages
</code></pre></div><h3 id="在项目目录下创建-package-json-文件"><a href="#在项目目录下创建-package-json-文件" aria-hidden="true" class="header-anchor">#</a> 在项目目录下创建 package.json 文件</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> init
</code></pre></div><p>上述命令将指引你设置项目名、版本、描述信息等</p> <h3 id="安装-gulp，作为开发时依赖项"><a href="#安装-gulp，作为开发时依赖项" aria-hidden="true" class="header-anchor">#</a> 安装 gulp，作为开发时依赖项</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> -D gulp
</code></pre></div><h3 id="检查-gulp-版本"><a href="#检查-gulp-版本" aria-hidden="true" class="header-anchor">#</a> 检查 gulp 版本</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>gulp --version
<span class="token comment"># 输出</span>
<span class="token comment"># CLI version: 2.2.0</span>
<span class="token comment"># Local version: 4.0.2</span>
</code></pre></div><h3 id="创建-gulpfile-文件"><a href="#创建-gulpfile-文件" aria-hidden="true" class="header-anchor">#</a> 创建 gulpfile 文件</h3> <p>在项目更目录下创建名为<code>gulpfile.js</code>的文件，并在文件中输出以下内容</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span>series<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;gulp&quot;</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token function-variable function">defaultTask</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;gulp run...&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

exports<span class="token punctuation">.</span>default <span class="token operator">=</span> <span class="token function">series</span><span class="token punctuation">(</span>defaultTask<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h3 id="测试"><a href="#测试" aria-hidden="true" class="header-anchor">#</a> 测试</h3> <p>在项目根目录下执行 gulp 命令</p> <p>输出结果</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">[</span><span class="token number">15</span>:56:43<span class="token punctuation">]</span> Using gulpfile E:<span class="token punctuation">\</span>gulp_multi_pages<span class="token punctuation">\</span>gulpfile.js
<span class="token punctuation">[</span><span class="token number">15</span>:56:43<span class="token punctuation">]</span> Starting <span class="token string">'default'</span><span class="token punctuation">..</span>.
<span class="token punctuation">[</span><span class="token number">15</span>:56:43<span class="token punctuation">]</span> Starting <span class="token string">'defaultTask'</span><span class="token punctuation">..</span>.
gulp run<span class="token punctuation">..</span>.
<span class="token punctuation">[</span><span class="token number">15</span>:56:43<span class="token punctuation">]</span> Finished <span class="token string">'defaultTask'</span> after <span class="token number">2.49</span> ms
<span class="token punctuation">[</span><span class="token number">15</span>:56:43<span class="token punctuation">]</span> Finished <span class="token string">'default'</span> after <span class="token number">6.25</span> ms
</code></pre></div><h3 id="复制、监控文件"><a href="#复制、监控文件" aria-hidden="true" class="header-anchor">#</a> 复制、监控文件</h3> <h3 id="less-scss编译"><a href="#less-scss编译" aria-hidden="true" class="header-anchor">#</a> less/scss编译</h3> <p>scss的编译</p> <div class="language- extra-class"><pre class="language-text"><code>npm install gulp-sass -D
npm install gulp-sass-glob -D
</code></pre></div><h3 id="css文件合并"><a href="#css文件合并" aria-hidden="true" class="header-anchor">#</a> css文件合并</h3> <h3 id="css文件压缩"><a href="#css文件压缩" aria-hidden="true" class="header-anchor">#</a> css文件压缩</h3> <h3 id="删除文件"><a href="#删除文件" aria-hidden="true" class="header-anchor">#</a> 删除文件</h3> <h3 id="js文件操作"><a href="#js文件操作" aria-hidden="true" class="header-anchor">#</a> js文件操作</h3> <h3 id="图片压缩"><a href="#图片压缩" aria-hidden="true" class="header-anchor">#</a> 图片压缩</h3> <h3 id="雪碧图"><a href="#雪碧图" aria-hidden="true" class="header-anchor">#</a> 雪碧图</h3> <h3 id="base64"><a href="#base64" aria-hidden="true" class="header-anchor">#</a> base64</h3> <h3 id="浏览器实时刷新"><a href="#浏览器实时刷新" aria-hidden="true" class="header-anchor">#</a> 浏览器实时刷新</h3> <h3 id="启动本地服务器"><a href="#启动本地服务器" aria-hidden="true" class="header-anchor">#</a> 启动本地服务器</h3> <h3 id="设置代理"><a href="#设置代理" aria-hidden="true" class="header-anchor">#</a> 设置代理</h3> <h3 id="项目通知"><a href="#项目通知" aria-hidden="true" class="header-anchor">#</a> 项目通知</h3> <h3 id="打包缓存"><a href="#打包缓存" aria-hidden="true" class="header-anchor">#</a> 打包缓存</h3> <h3 id="多环境判断"><a href="#多环境判断" aria-hidden="true" class="header-anchor">#</a> 多环境判断</h3> <p>在项目中我们需要判断服务器运行环境，可以根据process.env.NODE_ENV来判断。</p> <p>这里我们安装cross-env插件</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> -D cross-env
</code></pre></div><p>修改package.json,添加命令,传递运行环境参数dev、build</p> <div class="language-json extra-class"><pre class="language-json"><code> <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cross-env NODE_ENV=dev gulp&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cross-env NODE_ENV=build gulp&quot;</span>
  <span class="token punctuation">}</span>
</code></pre></div><p>修改gulpfile.js文件，输出环境参数信息。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span>series<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;gulp&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">defaultTask</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'NODE_ENV:'</span> <span class="token operator">+</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> 
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;gulp run...&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
exports<span class="token punctuation">.</span>default <span class="token operator">=</span> <span class="token function">series</span><span class="token punctuation">(</span>defaultTask<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>运行npm run dev</p> <p>输出结果</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">[</span><span class="token number">15</span>:56:43<span class="token punctuation">]</span> Using gulpfile E:<span class="token punctuation">\</span>gulp_multi_pages<span class="token punctuation">\</span>gulpfile.js
<span class="token punctuation">[</span><span class="token number">15</span>:56:43<span class="token punctuation">]</span> Starting <span class="token string">'default'</span><span class="token punctuation">..</span>.
<span class="token punctuation">[</span><span class="token number">15</span>:56:43<span class="token punctuation">]</span> Starting <span class="token string">'defaultTask'</span><span class="token punctuation">..</span>.
NODE_ENV:dev
gulp run<span class="token punctuation">..</span>.
<span class="token punctuation">[</span><span class="token number">15</span>:56:43<span class="token punctuation">]</span> Finished <span class="token string">'defaultTask'</span> after <span class="token number">2.49</span> ms
<span class="token punctuation">[</span><span class="token number">15</span>:56:43<span class="token punctuation">]</span> Finished <span class="token string">'default'</span> after <span class="token number">6.25</span> ms
</code></pre></div><h3 id="多环境配置"><a href="#多环境配置" aria-hidden="true" class="header-anchor">#</a> 多环境配置</h3> <p>这里我们参考webpack的配置，区分开发环境和生产环境</p> <p>创建以下文件：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>├─gulp
│      gulp.build.js    <span class="token comment"># 生产环境配置</span>
│      gulp.config.js   <span class="token comment"># 全局配置</span>
│      gulp.dev.js      <span class="token comment"># 开发环境配置</span>
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">10/9/2019, 3:20:32 PM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.ee223f02.js" defer></script><script src="/blog/assets/js/2.f364336e.js" defer></script><script src="/blog/assets/js/24.8df026f6.js" defer></script>
  </body>
</html>
